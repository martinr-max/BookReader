{"ast":null,"code":"var _jsxFileName = \"/Users/martinraba/Desktop/book_app/src/Admin/adminPage/AdminPanel.js\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport './AdminPanel.css';\nimport axios from 'axios';\nimport AdminTable from '../AdminTable/AdminTable';\nimport DeleteBookDialog from '../deleteBook/DeleteBookModal';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\nimport Alert from '@material-ui/lab/Alert';\nimport { Container } from '@material-ui/core';\nexport default function AdminPanel() {\n  const [loadedBooks, setLoadedBooks] = useState([]);\n  const [bookIndex, setBookIndex] = useState();\n  const [open, setOpen] = useState(false);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(3);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleclickOpen = index => {\n    let bookId = index;\n    setBookIndex(bookId);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n\n    const fetchBooks = async () => {\n      try {\n        const responseData = await axios.get('http://localhost:8000/api/bookBlog/books/');\n        const books = responseData.data;\n        const bookArray = [];\n\n        for (const key in books) {\n          bookArray.push({\n            id: key,\n            bookId: books[key].id,\n            title: books[key].title,\n            author: books[key].author,\n            imageUrl: books[key].imageUrl,\n            description: books[key].description,\n            year: books[key].year,\n            pages: books[key].pages\n          });\n        }\n\n        setLoadedBooks(bookArray);\n        setIsLoading(false);\n      } catch (err) {\n        setError(err.response.data.message);\n      }\n    };\n\n    fetchBooks();\n  }, []);\n\n  const handleDeleteBook = async () => {\n    setOpen(false);\n\n    try {\n      await axios.delete(\"http://localhost:8000/api/admin/books/delete/\" + bookIndex);\n      setLoadedBooks(prevBooks => prevBooks.filter(book => book.bookId !== bookIndex));\n    } catch (err) {\n      setError(err.response.data.message);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }\n  }, error && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 23\n    }\n  }, \" \", error, \" \"), !error && isLoading && /*#__PURE__*/React.createElement(CircularIndeterminate, {\n    size: \"7rem\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 40\n    }\n  }), loadedBooks && /*#__PURE__*/React.createElement(AdminTable, {\n    loadedBooks: loadedBooks,\n    handleclickOpen: handleclickOpen,\n    handleChangePage: handleChangePage,\n    handleChangeRowsPerPage: handleChangeRowsPerPage,\n    page: page,\n    rowsPerPage: rowsPerPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(DeleteBookDialog, {\n    open: open,\n    handleDeleteBook: handleDeleteBook,\n    handleClose: handleClose,\n    bookid: bookIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/martinraba/Desktop/book_app/src/Admin/adminPage/AdminPanel.js"],"names":["React","useEffect","useState","useCallback","axios","AdminTable","DeleteBookDialog","CircularIndeterminate","Alert","Container","AdminPanel","loadedBooks","setLoadedBooks","bookIndex","setBookIndex","open","setOpen","page","setPage","rowsPerPage","setRowsPerPage","isLoading","setIsLoading","error","setError","handleclickOpen","index","bookId","handleClose","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","fetchBooks","responseData","get","books","data","bookArray","key","push","id","title","author","imageUrl","description","year","pages","err","response","message","handleDeleteBook","delete","prevBooks","filter","book"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback, } from 'react';\nimport './AdminPanel.css'\nimport axios from 'axios';\nimport AdminTable from '../AdminTable/AdminTable';\nimport DeleteBookDialog from '../deleteBook/DeleteBookModal';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\nimport Alert from '@material-ui/lab/Alert';\nimport { Container } from '@material-ui/core';\n\n\nexport default function AdminPanel() {\n\n    const [loadedBooks, setLoadedBooks] = useState([]);\n    const [bookIndex, setBookIndex] = useState();\n    const [open, setOpen] = useState(false);\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(3);\n\n\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    const handleclickOpen = (index) => {\n     let bookId = index;\n      setBookIndex(bookId);\n      setOpen(true);\n    };\n\n    const handleClose = () => {\n      setOpen(false);\n    }\n\n    const handleChangePage = (event, newPage) => {\n      setPage(newPage);\n    };\n  \n    const handleChangeRowsPerPage = (event) => {\n      setRowsPerPage(parseInt(event.target.value, 10));\n      setPage(0);\n    };\n    \n    useEffect( () => {\n      setIsLoading(true); \n      const fetchBooks = async () => {\n        try {\n          const responseData = await axios.get('http://localhost:8000/api/bookBlog/books/');\n          const books = responseData.data;\n          const bookArray = []\n          for(const key in books) {\n            bookArray.push({\n              id: key,\n              bookId: books[key].id,\n              title: books[key].title,\n              author: books[key].author,\n              imageUrl: books[key].imageUrl,\n              description: books[key].description,\n              year: books[key].year,\n              pages: books[key].pages\n            })\n          } \n          setLoadedBooks(bookArray);\n          setIsLoading(false);   \n\n        }\n        catch(err) {\n          setError(err.response.data.message)\n        }\n      }\n\n      fetchBooks();\n       \n    }, []);\n\n    const handleDeleteBook = async () => {\n        setOpen(false);\n        try {\n          await axios.delete(\"http://localhost:8000/api/admin/books/delete/\" + bookIndex);\n          setLoadedBooks(prevBooks => prevBooks.filter(book => book.bookId !== bookIndex));\n\n        }\n        catch(err) {\n          setError(err.response.data.message)\n        }\n      \n      }\n\n\n    return (\n        <React.Fragment>\n           <Container>\n          { error &&  <Alert severity=\"error\"> { error } </Alert> }\n              {!error &&  isLoading && <CircularIndeterminate size=\"7rem\" color=\"primary\" />}\n              {loadedBooks && \n             \n            <AdminTable\n             loadedBooks={loadedBooks}\n             handleclickOpen={handleclickOpen}\n             handleChangePage={handleChangePage}\n             handleChangeRowsPerPage={handleChangeRowsPerPage}\n             page={page}\n             rowsPerPage={rowsPerPage}\n              /> }\n              </Container>\n              <DeleteBookDialog \n              open={open}\n              handleDeleteBook={handleDeleteBook}\n              handleClose={handleClose}\n              bookid={bookIndex} />\n        </React.Fragment>\n      );\n    \n}\n\n"]},"metadata":{},"sourceType":"module"}