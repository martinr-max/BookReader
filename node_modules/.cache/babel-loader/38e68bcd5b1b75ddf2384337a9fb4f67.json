{"ast":null,"code":"var _jsxFileName = \"/Users/martinraba/Desktop/book_app/src/Books/userBooksList/UserBookList.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\nimport './UserBookList.css';\nimport UserBooklistItem from '../userBooklistItem/UserBooklistItem';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\nimport Alert from '@material-ui/lab/Alert';\nexport default function UserBookList(props) {\n  const [loadedBook, setLoadedBook] = useState([]);\n  const [bookIndex, setBookIndex] = useState();\n  const [open, setOpen] = useState(false);\n  const [isLoading, setIsloading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const userId = useParams().userId;\n\n  const handleclickOpen = index => {\n    let bookId = index;\n    setBookIndex(bookId);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    setIsloading(true);\n\n    const getUseBooks = async () => {\n      try {\n        const responseData = await axios.get('http://localhost:8000/api/bookBlog/booklist/' + userId);\n        let userBooks = responseData.data;\n        setLoadedBook(userBooks);\n        setIsloading(false);\n      } catch (err) {\n        setError(err.response.data.message);\n      }\n    };\n\n    getUseBooks();\n  }, [userId]);\n\n  const handleDeleteUserBook = id => {\n    id = bookIndex;\n    setOpen(false);\n    fetch('http://localhost:8000/api/bookBlog/booklist/delete/' + userId, {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: id\n      })\n    }).then(response => {\n      return response.json();\n    }).then(deletedBook => {\n      let deletedBookId = deletedBook.id;\n      var userData = JSON.parse(localStorage.getItem('userData'));\n      let newBookList = userData.userBookList;\n\n      for (var i = 0; i < newBookList.length; i++) {\n        if (newBookList[i] === deletedBookId) {\n          newBookList.splice(i, 1);\n        }\n      }\n\n      let newArray = loadedBook.filter(book => book.id !== deletedBookId);\n      setLoadedBook(newArray);\n      localStorage.setItem('userData', JSON.stringify(userData));\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 3\n    }\n  }, error && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \" \", error, \" \"), isLoading && !error && /*#__PURE__*/React.createElement(CircularIndeterminate, {\n    color: \"primary\",\n    size: \"7rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"booklist_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Your Booklist\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"userBookList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, loadedBook.length !== 0 ? loadedBook && loadedBook.map(book => {\n    return /*#__PURE__*/React.createElement(UserBooklistItem, {\n      key: book.id,\n      id: book.id,\n      title: book.title,\n      author: book.author,\n      imageUrl: book.imageUrl,\n      open: open,\n      handleclickOpen: handleclickOpen,\n      handleClose: handleClose,\n      bookIndex: bookIndex,\n      handleDeleteUserBook: handleDeleteUserBook,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 24\n      }\n    });\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"listIsEmpty\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 12\n    }\n  }, \" Your list is empty. Maybe add some book?\"))));\n}","map":{"version":3,"sources":["/Users/martinraba/Desktop/book_app/src/Books/userBooksList/UserBookList.js"],"names":["React","useState","useEffect","axios","Container","useParams","UserBooklistItem","CircularIndeterminate","Alert","UserBookList","props","loadedBook","setLoadedBook","bookIndex","setBookIndex","open","setOpen","isLoading","setIsloading","error","setError","userId","handleclickOpen","index","bookId","handleClose","getUseBooks","responseData","get","userBooks","data","err","response","message","handleDeleteUserBook","id","fetch","method","headers","body","JSON","stringify","then","json","deletedBook","deletedBookId","userData","parse","localStorage","getItem","newBookList","userBookList","i","length","splice","newArray","filter","book","setItem","catch","console","log","map","title","author","imageUrl"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\nimport './UserBookList.css';\nimport UserBooklistItem from '../userBooklistItem/UserBooklistItem';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\nimport Alert from '@material-ui/lab/Alert';\n\n\nexport default function UserBookList(props) {\n\n\tconst [loadedBook, setLoadedBook] = useState([]);\n\tconst [bookIndex, setBookIndex] = useState();\n\tconst [open, setOpen] = useState(false);\n\tconst [isLoading, setIsloading] = useState(false);\n\tconst [error, setError] = useState(\"\");\n\n\tconst userId = useParams()\n\t\t.userId;\n\n\tconst handleclickOpen = (index) => {\n\t\tlet bookId = index;\n\t\tsetBookIndex(bookId);\n\t\tsetOpen(true);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t}\n\n\tuseEffect(() => {\n\t\tsetIsloading(true);\n\t\tconst getUseBooks = async () => {\n\t\t\ttry {\n\t\t\t\tconst responseData = await axios.get('http://localhost:8000/api/bookBlog/booklist/' + userId)\n\t\t\t\tlet userBooks = responseData.data;\n\t\t\t\tsetLoadedBook(userBooks);\n\t\t\t\tsetIsloading(false);\n\t\t\t} catch (err) {\n\t\t\t\tsetError(err.response.data.message);\n\t\t\t}\n\t\t}\n\t\tgetUseBooks();\n\n\t}, [userId]);\n\n\tconst handleDeleteUserBook = (id) => {\n\t\tid = bookIndex;\n\t\tsetOpen(false);\n\t\tfetch('http://localhost:8000/api/bookBlog/booklist/delete/' + userId, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\tbody: JSON.stringify({ id: id })\n\t\t\t})\n\t\t\t.then(response => {\n\t\t\t\treturn response.json()\n\n\t\t\t})\n\t\t\t.then((deletedBook) => {\n\t\t\t\tlet deletedBookId = deletedBook.id;\n\t\t\t\tvar userData = JSON.parse(localStorage.getItem('userData'));\n\t\t\t\tlet newBookList = userData.userBookList;\n\t\t\t\tfor (var i = 0; i < newBookList.length; i++) {\n\t\t\t\t\tif (newBookList[i] === deletedBookId) { newBookList.splice(i, 1); }\n\t\t\t\t}\n\t\t\t\tlet newArray = loadedBook.filter(book => book.id !== deletedBookId);\n\t\t\t\tsetLoadedBook(newArray)\n\t\t\t\tlocalStorage.setItem('userData', JSON.stringify(userData))\n\t\t\t})\n\t\t\t.catch(err => console.log(err))\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n        { error &&  <Alert severity=\"error\"> { error } </Alert> }\n        {isLoading && !error && <CircularIndeterminate color=\"primary\" size=\"7rem\" />}\n        <Container>\n        <h3 className=\"booklist_title\">Your Booklist</h3>\n        \n        <ul className=\"userBookList\">\n        { loadedBook.length !== 0 ?    \n              loadedBook && loadedBook.map(book => {\n                return <UserBooklistItem\n                    key = {book.id}\n                    id = {book.id}\n                    title={book.title}\n                    author={book.author}\n                    imageUrl= {book.imageUrl}\n                    open={open}\n                    handleclickOpen={handleclickOpen}\n                    handleClose={handleClose}\n                    bookIndex={bookIndex}\n                    handleDeleteUserBook= {handleDeleteUserBook}\n             />})\n        :  <p className=\"listIsEmpty\"> Your list is empty. Maybe add some book?</p>}\n        </ul>\n        </Container>\n        </React.Fragment>\n\t)\n}"]},"metadata":{},"sourceType":"module"}