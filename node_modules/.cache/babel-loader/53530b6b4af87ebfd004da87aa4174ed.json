{"ast":null,"code":"var _jsxFileName = \"/Users/martinraba/Desktop/book_app/src/Admin/adminPage/AdminPanel.js\";\nimport React, { useEffect, useState } from 'react';\nimport './AdminPanel.css';\nimport axios from 'axios';\nimport AdminTable from '../AdminTable/AdminTable';\nimport DeleteBookDialog from '../deleteBook/DeleteBookModal';\nexport default function AdminPanel() {\n  const [loadedBooks, setLoadedBooks] = useState([]);\n  const [bookIndex, setBookIndex] = useState();\n  const [open, setOpen] = useState(false);\n\n  const handleclickOpen = index => {\n    let bookId = index;\n    setBookIndex(bookId);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleDeleteBook = () => {\n    setOpen(false);\n    axios.delete(\"http://localhost:8000/api/admin/books/delete/\" + bookIndex).then(response => {\n      setLoadedBooks(prevBooks => prevBooks.filter(book => book.id !== bookIndex));\n    }).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    axios.get('http://localhost:8000/api/bookBlog/books/').then(response => {\n      const books = response.data.books;\n      const bookArray = [];\n\n      for (const key in books) {\n        bookArray.push({\n          id: key,\n          bookId: books[key].id,\n          title: books[key].title,\n          author: books[key].author,\n          imageUrl: books[key].imageUrl,\n          description: books[key].description,\n          year: books[key].year,\n          pages: books[key].pages\n        });\n      }\n\n      setLoadedBooks(bookArray);\n    }).catch(err => console.log(err));\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DeleteBookDialog, {\n    open: open,\n    handleDeleteBook: handleDeleteBook,\n    handleClose: handleClose,\n    bookid: bookIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }), loadedBooks && /*#__PURE__*/React.createElement(AdminTable, {\n    loadedBooks: loadedBooks,\n    handleclickOpen: handleclickOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/martinraba/Desktop/book_app/src/Admin/adminPage/AdminPanel.js"],"names":["React","useEffect","useState","axios","AdminTable","DeleteBookDialog","AdminPanel","loadedBooks","setLoadedBooks","bookIndex","setBookIndex","open","setOpen","handleclickOpen","index","bookId","handleClose","handleDeleteBook","delete","then","response","prevBooks","filter","book","id","catch","err","console","log","get","books","data","bookArray","key","push","title","author","imageUrl","description","year","pages"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, } from 'react';\nimport './AdminPanel.css'\nimport axios from 'axios';\nimport AdminTable from '../AdminTable/AdminTable';\nimport DeleteBookDialog from '../deleteBook/DeleteBookModal';\n\nexport default function AdminPanel() {\n\n\n    const [loadedBooks, setLoadedBooks] = useState([])\n    const [bookIndex, setBookIndex] = useState()\n\n    const [open, setOpen] = useState(false);\n\n    const handleclickOpen = (index) => {\n     let bookId = index;\n      setBookIndex(bookId);\n      setOpen(true);\n    };\n\n    const handleClose = () => {\n      setOpen(false);\n\n    }\n\n  const handleDeleteBook = () => {\n    setOpen(false);\n    axios.delete(\"http://localhost:8000/api/admin/books/delete/\" + bookIndex)\n    .then(response => {\n      setLoadedBooks(prevBooks => prevBooks.filter(book => book.id !== bookIndex))\n    })\n    \n    .catch(err => console.log(err));\n  };\n\n\n      \n    useEffect( () => {\n        \n        axios.get('http://localhost:8000/api/bookBlog/books/')\n        .then( response => {\n            const books = response.data.books;\n            const bookArray = []\n            for(const key in books) {\n              bookArray.push({\n                id: key,\n                bookId: books[key].id,\n                title: books[key].title,\n                author: books[key].author,\n                imageUrl: books[key].imageUrl,\n                description: books[key].description,\n                year: books[key].year,\n                pages: books[key].pages\n              })\n            } \n            setLoadedBooks(bookArray)   \n     \n        })\n        .catch(err => console.log(err))       \n }, []);\n\n\n \n\n    return (\n        <React.Fragment>\n            <DeleteBookDialog \n              open={open}\n              handleDeleteBook={handleDeleteBook}\n              handleClose={handleClose}\n              bookid={bookIndex} />\n            {loadedBooks && \n            <AdminTable\n             loadedBooks={loadedBooks}\n             handleclickOpen={handleclickOpen}\n              /> }\n        </React.Fragment>\n      );\n    \n\n}\n\n"]},"metadata":{},"sourceType":"module"}