{"ast":null,"code":"var _jsxFileName = \"/Users/martinraba/Desktop/book_app/src/Admin/adminPage/AdminPanel.js\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport './AdminPanel.css';\nimport axios from 'axios';\nimport AdminTable from '../AdminTable/AdminTable';\nimport DeleteBookDialog from '../deleteBook/DeleteBookModal';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\nimport Alert from '@material-ui/lab/Alert';\nexport default function AdminPanel() {\n  const [loadedBooks, setLoadedBooks] = useState([]);\n  const [bookIndex, setBookIndex] = useState();\n  const [open, setOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleclickOpen = index => {\n    let bookId = index;\n    setBookIndex(bookId);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        const responseData = await axios.get('http://localhost:8000/api/bookBlog/books/');\n        const books = responseData.data;\n        const bookArray = [];\n\n        for (const key in books) {\n          bookArray.push({\n            id: key,\n            bookId: books[key].id,\n            title: books[key].title,\n            author: books[key].author,\n            imageUrl: books[key].imageUrl,\n            description: books[key].description,\n            year: books[key].year,\n            pages: books[key].pages\n          });\n        }\n\n        setLoadedBooks(bookArray);\n      } catch (err) {\n        setError(err.response.data.message);\n      }\n    };\n\n    fetchBooks();\n  }, []);\n  const handleDeleteBook = useCallback(() => {\n    setOpen(false);\n    axios.delete(\"http://localhost:8000/api/admin/books/delete/\" + bookIndex).then(response => {\n      setLoadedBooks(prevBooks => prevBooks.filter(book => book.bookId !== bookIndex));\n    }).catch(err => console.log(err));\n  }, [bookIndex]);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, error && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 23\n    }\n  }, \" \", error, \" \"), !error && isLoading && /*#__PURE__*/React.createElement(CircularIndeterminate, {\n    size: \"7rem\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 40\n    }\n  }), loadedBooks && /*#__PURE__*/React.createElement(AdminTable, {\n    loadedBooks: loadedBooks,\n    handleclickOpen: handleclickOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DeleteBookDialog, {\n    open: open,\n    handleDeleteBook: handleDeleteBook,\n    handleClose: handleClose,\n    bookid: bookIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/martinraba/Desktop/book_app/src/Admin/adminPage/AdminPanel.js"],"names":["React","useEffect","useState","useCallback","axios","AdminTable","DeleteBookDialog","CircularIndeterminate","Alert","AdminPanel","loadedBooks","setLoadedBooks","bookIndex","setBookIndex","open","setOpen","isLoading","setIsLoading","error","setError","handleclickOpen","index","bookId","handleClose","fetchBooks","responseData","get","books","data","bookArray","key","push","id","title","author","imageUrl","description","year","pages","err","response","message","handleDeleteBook","delete","then","prevBooks","filter","book","catch","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback, } from 'react';\nimport './AdminPanel.css'\nimport axios from 'axios';\nimport AdminTable from '../AdminTable/AdminTable';\nimport DeleteBookDialog from '../deleteBook/DeleteBookModal';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\nimport Alert from '@material-ui/lab/Alert';\n\n\nexport default function AdminPanel() {\n\n    const [loadedBooks, setLoadedBooks] = useState([]);\n    const [bookIndex, setBookIndex] = useState();\n    const [open, setOpen] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    const handleclickOpen = (index) => {\n     let bookId = index;\n      setBookIndex(bookId);\n      setOpen(true);\n    };\n\n    const handleClose = () => {\n      setOpen(false);\n    }\n    \n    useEffect( () => {\n      \n      const fetchBooks = async () => {\n        try {\n          const responseData = await axios.get('http://localhost:8000/api/bookBlog/books/');\n          const books = responseData.data;\n          const bookArray = []\n          for(const key in books) {\n            bookArray.push({\n              id: key,\n              bookId: books[key].id,\n              title: books[key].title,\n              author: books[key].author,\n              imageUrl: books[key].imageUrl,\n              description: books[key].description,\n              year: books[key].year,\n              pages: books[key].pages\n            })\n          } \n          setLoadedBooks(bookArray)   \n\n        }\n        catch(err) {\n          setError(err.response.data.message)\n        }\n      }\n\n        fetchBooks();\n       \n    }, []);\n\n      const handleDeleteBook = useCallback(() => {\n        setOpen(false);\n        axios.delete(\"http://localhost:8000/api/admin/books/delete/\" + bookIndex)\n        .then(response => {\n          setLoadedBooks(prevBooks => prevBooks.filter(book => book.bookId !== bookIndex))\n        })\n        .catch(err => console.log(err));\n      }, [bookIndex]);\n\n\n    return (\n        <React.Fragment>\n          { error &&  <Alert severity=\"error\"> { error } </Alert> }\n              {!error &&  isLoading && <CircularIndeterminate size=\"7rem\" color=\"primary\" />}\n              {loadedBooks && \n            <AdminTable\n             loadedBooks={loadedBooks}\n             handleclickOpen={handleclickOpen}\n              /> }\n              <DeleteBookDialog \n              open={open}\n              handleDeleteBook={handleDeleteBook}\n              handleClose={handleClose}\n              bookid={bookIndex} />\n        </React.Fragment>\n      );\n    \n}\n\n"]},"metadata":{},"sourceType":"module"}