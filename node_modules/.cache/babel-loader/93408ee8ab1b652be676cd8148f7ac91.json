{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? e(exports) : \"function\" == typeof define && define.amd ? define([\"exports\"], e) : e((t = t || self).St = {});\n}(this, function (t) {\n  \"use strict\";\n\n  class e {\n    constructor(t, e) {\n      this.state = {\n        angle: 0,\n        area: [],\n        position: {\n          x: 0,\n          y: 0\n        },\n        hardAngle: 0,\n        hardDrawingAngle: 0\n      }, this.createdDensity = e, this.nowDrawingDensity = this.createdDensity, this.render = t;\n    }\n\n    setDensity(t) {\n      this.createdDensity = t, this.nowDrawingDensity = t;\n    }\n\n    setDrawingDensity(t) {\n      this.nowDrawingDensity = t;\n    }\n\n    setPosition(t) {\n      this.state.position = t;\n    }\n\n    setAngle(t) {\n      this.state.angle = t;\n    }\n\n    setArea(t) {\n      this.state.area = t;\n    }\n\n    setHardDrawingAngle(t) {\n      this.state.hardDrawingAngle = t;\n    }\n\n    setHardAngle(t) {\n      this.state.hardAngle = t, this.state.hardDrawingAngle = t;\n    }\n\n    setOrientation(t) {\n      this.orientation = t;\n    }\n\n    getDrawingDensity() {\n      return this.nowDrawingDensity;\n    }\n\n    getDensity() {\n      return this.createdDensity;\n    }\n\n    getHardAngle() {\n      return this.state.hardAngle;\n    }\n\n  }\n\n  class i extends e {\n    constructor(t, e, i) {\n      super(t, i), this.image = null, this.isLoad = !1, this.loadingAngle = 0, this.image = new Image(), this.image.src = e;\n    }\n\n    draw(t) {\n      const e = this.render.getContext(),\n            i = this.render.convertToGlobal(this.state.position),\n            s = this.render.getRect().pageWidth,\n            n = this.render.getRect().height;\n      e.save(), e.translate(i.x, i.y), e.beginPath();\n\n      for (let t of this.state.area) null !== t && (t = this.render.convertToGlobal(t), e.lineTo(t.x - i.x, t.y - i.y));\n\n      e.rotate(this.state.angle), e.clip(), this.isLoad ? e.drawImage(this.image, 0, 0, s, n) : this.drawLoader(e, {\n        x: 0,\n        y: 0\n      }, s, n), e.restore();\n    }\n\n    simpleDraw(t) {\n      const e = this.render.getRect(),\n            i = this.render.getContext(),\n            s = e.pageWidth,\n            n = e.height,\n            h = 1 === t ? e.left + e.pageWidth : e.left,\n            o = e.top;\n      this.isLoad ? i.drawImage(this.image, h, o, s, n) : this.drawLoader(i, {\n        x: h,\n        y: o\n      }, s, n);\n    }\n\n    drawLoader(t, e, i, s) {\n      t.beginPath(), t.strokeStyle = \"rgb(200, 200, 200)\", t.fillStyle = \"rgb(255, 255, 255)\", t.lineWidth = 1, t.rect(e.x + 1, e.y + 1, i - 1, s - 1), t.stroke(), t.fill();\n      const n = {\n        x: e.x + i / 2,\n        y: e.y + s / 2\n      };\n      t.beginPath(), t.lineWidth = 10, t.arc(n.x, n.y, 20, this.loadingAngle, 3 * Math.PI / 2 + this.loadingAngle), t.stroke(), t.closePath(), this.loadingAngle += .07, this.loadingAngle >= 2 * Math.PI && (this.loadingAngle = 0);\n    }\n\n    load() {\n      this.isLoad || (this.image.onload = () => {\n        this.isLoad = !0;\n      });\n    }\n\n    newTemporaryCopy() {\n      return this;\n    }\n\n    getTemporaryCopy() {\n      return this;\n    }\n\n    hideTemporaryCopy() {}\n\n  }\n\n  class s {\n    constructor(t, e) {\n      this.pages = [], this.currentPageIndex = 0, this.currentSpreadIndex = 0, this.landscapeSpread = [], this.portraitSpread = [], this.render = e, this.app = t, this.currentPageIndex = 0, this.isShowCover = this.app.getSettings().showCover;\n    }\n\n    destroy() {\n      this.pages = [];\n    }\n\n    createSpread() {\n      this.landscapeSpread = [], this.portraitSpread = [];\n\n      for (let t = 0; t < this.pages.length; t++) this.portraitSpread.push([t]);\n\n      let t = 0;\n      this.isShowCover && (this.pages[0].setDensity(\"hard\"), this.landscapeSpread.push([t]), t++);\n\n      for (let e = t; e < this.pages.length; e += 2) e < this.pages.length - 1 ? this.landscapeSpread.push([e, e + 1]) : (this.landscapeSpread.push([e]), this.pages[e].setDensity(\"hard\"));\n    }\n\n    getSpread() {\n      return \"landscape\" === this.render.getOrientation() ? this.landscapeSpread : this.portraitSpread;\n    }\n\n    getSpreadIndexByPage(t) {\n      const e = this.getSpread();\n\n      for (let i = 0; i < e.length; i++) if (t === e[i][0] || t === e[i][1]) return i;\n\n      return null;\n    }\n\n    getPageCount() {\n      return this.pages.length;\n    }\n\n    getPages() {\n      return this.pages;\n    }\n\n    getPage(t) {\n      if (t >= 0 && t < this.pages.length) return this.pages[t];\n      throw new Error(\"Invalid page number\");\n    }\n\n    nextBy(t) {\n      const e = this.pages.indexOf(t);\n      return e < this.pages.length - 1 ? this.pages[e + 1] : null;\n    }\n\n    prevBy(t) {\n      const e = this.pages.indexOf(t);\n      return e > 0 ? this.pages[e - 1] : null;\n    }\n\n    getFlippingPage(t) {\n      const e = this.currentSpreadIndex;\n      if (\"portrait\" === this.render.getOrientation()) return 0 === t ? this.pages[e].newTemporaryCopy() : this.pages[e - 1];\n      {\n        const i = 0 === t ? this.getSpread()[e + 1] : this.getSpread()[e - 1];\n        return 1 === i.length || 0 === t ? this.pages[i[0]] : this.pages[i[1]];\n      }\n    }\n\n    getBottomPage(t) {\n      const e = this.currentSpreadIndex;\n      if (\"portrait\" === this.render.getOrientation()) return 0 === t ? this.pages[e + 1] : this.pages[e - 1];\n      {\n        const i = 0 === t ? this.getSpread()[e + 1] : this.getSpread()[e - 1];\n        return 1 === i.length ? this.pages[i[0]] : 0 === t ? this.pages[i[1]] : this.pages[i[0]];\n      }\n    }\n\n    showNext() {\n      this.currentSpreadIndex < this.getSpread().length && (this.currentSpreadIndex++, this.showSpread());\n    }\n\n    showPrev() {\n      this.currentSpreadIndex > 0 && (this.currentSpreadIndex--, this.showSpread());\n    }\n\n    getCurrentPageIndex() {\n      return this.currentPageIndex;\n    }\n\n    show(t = null) {\n      if (null === t && (t = this.currentPageIndex), t < 0 || t >= this.pages.length) return;\n      const e = this.getSpreadIndexByPage(t);\n      null !== e && (this.currentSpreadIndex = e, this.showSpread());\n    }\n\n    getCurrentSpreadIndex() {\n      return this.currentSpreadIndex;\n    }\n\n    setCurrentSpreadIndex(t) {\n      if (!(t >= 0 && t < this.getSpread().length)) throw new Error(\"Invalid page\");\n      this.currentSpreadIndex = t;\n    }\n\n    showSpread() {\n      const t = this.getSpread()[this.currentSpreadIndex];\n      2 === t.length ? (this.render.setLeftPage(this.pages[t[0]]), this.render.setRightPage(this.pages[t[1]])) : \"landscape\" === this.render.getOrientation() && t[0] === this.pages.length - 1 ? (this.render.setLeftPage(this.pages[t[0]]), this.render.setRightPage(null)) : (this.render.setLeftPage(null), this.render.setRightPage(this.pages[t[0]])), this.currentPageIndex = t[0], this.app.updatePageIndex(this.currentPageIndex);\n    }\n\n  }\n\n  class n extends s {\n    constructor(t, e, i) {\n      super(t, e), this.imagesHref = i;\n    }\n\n    load() {\n      for (const t of this.imagesHref) {\n        const e = new i(this.render, t, \"soft\");\n        e.load(), this.pages.push(e);\n      }\n\n      this.createSpread();\n    }\n\n  }\n\n  class h {\n    static GetDistanceBetweenTwoPoint(t, e) {\n      return null === t || null === e ? 1 / 0 : Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));\n    }\n\n    static GetSegmentLength(t) {\n      return h.GetDistanceBetweenTwoPoint(t[0], t[1]);\n    }\n\n    static GetAngleBetweenTwoLine(t, e) {\n      const i = t[0].y - t[1].y,\n            s = e[0].y - e[1].y,\n            n = t[1].x - t[0].x,\n            h = e[1].x - e[0].x;\n      return Math.acos((i * s + n * h) / (Math.sqrt(i * i + n * n) * Math.sqrt(s * s + h * h)));\n    }\n\n    static PointInRect(t, e) {\n      return null === e ? null : e.x >= t.left && e.x <= t.width + t.left && e.y >= t.top && e.y <= t.top + t.height ? e : null;\n    }\n\n    static GetRotatedPoint(t, e, i) {\n      return {\n        x: t.x * Math.cos(i) + t.y * Math.sin(i) + e.x,\n        y: t.y * Math.cos(i) - t.x * Math.sin(i) + e.y\n      };\n    }\n\n    static LimitPointToCircle(t, e, i) {\n      if (h.GetDistanceBetweenTwoPoint(t, i) <= e) return i;\n      const s = t.x,\n            n = t.y,\n            o = i.x,\n            a = i.y;\n      let r = Math.sqrt(Math.pow(e, 2) * Math.pow(s - o, 2) / (Math.pow(s - o, 2) + Math.pow(n - a, 2))) + s;\n      i.x < 0 && (r *= -1);\n      let g = (r - s) * (n - a) / (s - o) + n;\n      return s - o + n === 0 && (g = e), {\n        x: r,\n        y: g\n      };\n    }\n\n    static GetIntersectBetweenTwoSegment(t, e, i) {\n      return h.PointInRect(t, h.GetIntersectBeetwenTwoLine(e, i));\n    }\n\n    static GetIntersectBeetwenTwoLine(t, e) {\n      const i = t[0].y - t[1].y,\n            s = e[0].y - e[1].y,\n            n = t[1].x - t[0].x,\n            h = e[1].x - e[0].x,\n            o = t[0].x * t[1].y - t[1].x * t[0].y,\n            a = e[0].x * e[1].y - e[1].x * e[0].y,\n            r = i * a - s * o,\n            g = n * a - h * o,\n            l = -(o * h - a * n) / (i * h - s * n),\n            d = -(i * a - s * o) / (i * h - s * n);\n      if (isFinite(l) && isFinite(d)) return {\n        x: l,\n        y: d\n      };\n      if (Math.abs(r - g) < .1) throw new Error(\"Segment included\");\n      return null;\n    }\n\n    static GetCordsFromTwoPoint(t, e) {\n      const i = Math.abs(t.x - e.x),\n            s = Math.abs(t.y - e.y),\n            n = Math.max(i, s),\n            h = [t];\n\n      function o(t, e, i, s, n) {\n        return e > t ? t + n * (i / s) : e < t ? t - n * (i / s) : t;\n      }\n\n      for (let a = 1; a <= n; a += 1) h.push({\n        x: o(t.x, e.x, i, n, a),\n        y: o(t.y, e.y, s, n, a)\n      });\n\n      return h;\n    }\n\n  }\n\n  class o extends e {\n    constructor(t, e, i) {\n      super(t, i), this.copiedElement = null, this.temporaryCopy = null, this.isLoad = !1, this.element = e, this.element.classList.add(\"stf__item\"), this.element.classList.add(\"--\" + i);\n    }\n\n    newTemporaryCopy() {\n      return \"hard\" === this.nowDrawingDensity ? this : (null === this.temporaryCopy && (this.copiedElement = this.element.cloneNode(!0), this.element.parentElement.appendChild(this.copiedElement), this.temporaryCopy = new o(this.render, this.copiedElement, this.nowDrawingDensity)), this.getTemporaryCopy());\n    }\n\n    getTemporaryCopy() {\n      return this.temporaryCopy;\n    }\n\n    hideTemporaryCopy() {\n      null !== this.temporaryCopy && (this.copiedElement.remove(), this.copiedElement = null, this.temporaryCopy = null);\n    }\n\n    draw(t) {\n      const e = t || this.nowDrawingDensity,\n            i = this.render.convertToGlobal(this.state.position),\n            s = this.render.getRect().pageWidth,\n            n = this.render.getRect().height;\n      this.element.classList.remove(\"--simple\");\n      const h = `\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\n      \"hard\" === e ? this.drawHard(h) : this.drawSoft(i, h);\n    }\n\n    drawHard(t = \"\") {\n      const e = this.render.getRect().left + this.render.getRect().width / 2,\n            i = this.state.hardDrawingAngle,\n            s = t + \"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \" + (0 === this.orientation ? `transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);` : `transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);\n      this.element.style.cssText = s;\n    }\n\n    drawSoft(t, e = \"\") {\n      let i = \"polygon( \";\n\n      for (const t of this.state.area) if (null !== t) {\n        let e = 1 === this.render.getDirection() ? {\n          x: -t.x + this.state.position.x,\n          y: t.y - this.state.position.y\n        } : {\n          x: t.x - this.state.position.x,\n          y: t.y - this.state.position.y\n        };\n        e = h.GetRotatedPoint(e, {\n          x: 0,\n          y: 0\n        }, this.state.angle), i += e.x + \"px \" + e.y + \"px, \";\n      }\n\n      i = i.slice(0, -2), i += \")\";\n      const s = e + `transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};` + (this.render.isSafari() && 0 === this.state.angle ? `transform: translate(${t.x}px, ${t.y}px);` : `transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);\n      this.element.style.cssText = s;\n    }\n\n    simpleDraw(t) {\n      const e = this.render.getRect(),\n            i = e.pageWidth,\n            s = e.height,\n            n = 1 === t ? e.left + e.pageWidth : e.left,\n            h = e.top;\n      this.element.classList.add(\"--simple\"), this.element.style.cssText = `\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex + 1};`;\n    }\n\n    getElement() {\n      return this.element;\n    }\n\n    load() {\n      this.isLoad = !0;\n    }\n\n    setOrientation(t) {\n      super.setOrientation(t), this.element.classList.remove(\"--left\", \"--right\"), this.element.classList.add(1 === t ? \"--right\" : \"--left\");\n    }\n\n    setDrawingDensity(t) {\n      this.element.classList.remove(\"--soft\", \"--hard\"), this.element.classList.add(\"--\" + t), super.setDrawingDensity(t);\n    }\n\n  }\n\n  class a extends s {\n    constructor(t, e, i, s) {\n      super(t, e), this.element = i, this.pagesElement = s;\n    }\n\n    load() {\n      for (const t of this.pagesElement) {\n        const e = new o(this.render, t, \"hard\" === t.dataset.density ? \"hard\" : \"soft\");\n        e.load(), this.pages.push(e);\n      }\n\n      this.createSpread();\n    }\n\n  }\n\n  class r {\n    constructor(t, e, i, s) {\n      this.direction = t, this.corner = e, this.topIntersectPoint = null, this.sideIntersectPoint = null, this.bottomIntersectPoint = null, this.pageWidth = parseInt(i, 10), this.pageHeight = parseInt(s, 10);\n    }\n\n    calc(t) {\n      try {\n        return this.position = this.calcAngleAndPosition(t), this.calculateIntersectPoint(this.position), !0;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    getFlippingClipArea() {\n      const t = [];\n      let e = !1;\n      return t.push(this.rect.topLeft), t.push(this.topIntersectPoint), null === this.sideIntersectPoint ? e = !0 : (t.push(this.sideIntersectPoint), null === this.bottomIntersectPoint && (e = !1)), t.push(this.bottomIntersectPoint), (e || \"bottom\" === this.corner) && t.push(this.rect.bottomLeft), t;\n    }\n\n    getBottomClipArea() {\n      const t = [];\n      return t.push(this.topIntersectPoint), \"top\" === this.corner ? t.push({\n        x: this.pageWidth,\n        y: 0\n      }) : (null !== this.topIntersectPoint && t.push({\n        x: this.pageWidth,\n        y: 0\n      }), t.push({\n        x: this.pageWidth,\n        y: this.pageHeight\n      })), null !== this.sideIntersectPoint ? h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint, this.topIntersectPoint) >= 10 && t.push(this.sideIntersectPoint) : \"top\" === this.corner && t.push({\n        x: this.pageWidth,\n        y: this.pageHeight\n      }), t.push(this.bottomIntersectPoint), t.push(this.topIntersectPoint), t;\n    }\n\n    getAngle() {\n      return 0 === this.direction ? -this.angle : this.angle;\n    }\n\n    getRect() {\n      return this.rect;\n    }\n\n    getPosition() {\n      return this.position;\n    }\n\n    getActiveCorner() {\n      return 0 === this.direction ? this.rect.topLeft : this.rect.topRight;\n    }\n\n    getDirection() {\n      return this.direction;\n    }\n\n    getFlippingProgress() {\n      return Math.abs((this.position.x - this.pageWidth) / (2 * this.pageWidth) * 100);\n    }\n\n    getCorner() {\n      return this.corner;\n    }\n\n    getBottomPagePosition() {\n      return 1 === this.direction ? {\n        x: this.pageWidth,\n        y: 0\n      } : {\n        x: 0,\n        y: 0\n      };\n    }\n\n    getShadowStartPoint() {\n      return \"top\" === this.corner ? this.topIntersectPoint : null !== this.sideIntersectPoint ? this.sideIntersectPoint : this.topIntersectPoint;\n    }\n\n    getShadowAngle() {\n      const t = h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(), [{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }]);\n      return 0 === this.direction ? t : Math.PI - t;\n    }\n\n    calcAngleAndPosition(t) {\n      let e = t;\n      if (this.updateAngleAndGeometry(e), e = \"top\" === this.corner ? this.checkPositionAtCenterLine(e, {\n        x: 0,\n        y: 0\n      }, {\n        x: 0,\n        y: this.pageHeight\n      }) : this.checkPositionAtCenterLine(e, {\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: 0,\n        y: 0\n      }), Math.abs(e.x - this.pageWidth) < 1 && Math.abs(e.y) < 1) throw new Error(\"Point is too small\");\n      return e;\n    }\n\n    updateAngleAndGeometry(t) {\n      this.angle = this.calculateAngle(t), this.rect = this.getPageRect(t);\n    }\n\n    calculateAngle(t) {\n      const e = this.pageWidth - t.x + 1,\n            i = \"bottom\" === this.corner ? this.pageHeight - t.y : t.y;\n      let s = 2 * Math.acos(e / Math.sqrt(i * i + e * e));\n      i < 0 && (s = -s);\n      const n = Math.PI - s;\n      if (!isFinite(s) || n >= 0 && n < .003) throw new Error(\"The G point is too small\");\n      return \"bottom\" === this.corner && (s = -s), s;\n    }\n\n    getPageRect(t) {\n      return \"top\" === this.corner ? this.getRectFromBasePoint([{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }, {\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }], t) : this.getRectFromBasePoint([{\n        x: 0,\n        y: -this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: -this.pageHeight\n      }, {\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }], t);\n    }\n\n    getRectFromBasePoint(t, e) {\n      return {\n        topLeft: this.getRotatedPoint(t[0], e),\n        topRight: this.getRotatedPoint(t[1], e),\n        bottomLeft: this.getRotatedPoint(t[2], e),\n        bottomRight: this.getRotatedPoint(t[3], e)\n      };\n    }\n\n    getRotatedPoint(t, e) {\n      return {\n        x: t.x * Math.cos(this.angle) + t.y * Math.sin(this.angle) + e.x,\n        y: t.y * Math.cos(this.angle) - t.x * Math.sin(this.angle) + e.y\n      };\n    }\n\n    calculateIntersectPoint(t) {\n      const e = {\n        left: -1,\n        top: -1,\n        width: this.pageWidth + 2,\n        height: this.pageHeight + 2\n      };\n      \"top\" === this.corner ? (this.topIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.topRight], [{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }]), this.sideIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.bottomLeft], [{\n        x: this.pageWidth,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }]), this.bottomIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.bottomLeft, this.rect.bottomRight], [{\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }])) : (this.topIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.topLeft, this.rect.topRight], [{\n        x: 0,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: 0\n      }]), this.sideIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [t, this.rect.topLeft], [{\n        x: this.pageWidth,\n        y: 0\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }]), this.bottomIntersectPoint = h.GetIntersectBetweenTwoSegment(e, [this.rect.bottomLeft, this.rect.bottomRight], [{\n        x: 0,\n        y: this.pageHeight\n      }, {\n        x: this.pageWidth,\n        y: this.pageHeight\n      }]));\n    }\n\n    checkPositionAtCenterLine(t, e, i) {\n      let s = t;\n      const n = h.LimitPointToCircle(e, this.pageWidth, s);\n      s !== n && (s = n, this.updateAngleAndGeometry(s));\n      const o = Math.sqrt(Math.pow(this.pageWidth, 2) + Math.pow(this.pageHeight, 2));\n      let a = this.rect.bottomRight,\n          r = this.rect.topLeft;\n\n      if (\"bottom\" === this.corner && (a = this.rect.topRight, r = this.rect.bottomLeft), a.x <= 0) {\n        const t = h.LimitPointToCircle(i, o, r);\n        t !== s && (s = t, this.updateAngleAndGeometry(s));\n      }\n\n      return s;\n    }\n\n    getSegmentToShadowLine() {\n      const t = this.getShadowStartPoint();\n      return [t, t !== this.sideIntersectPoint && null !== this.sideIntersectPoint ? this.sideIntersectPoint : this.bottomIntersectPoint];\n    }\n\n  }\n\n  class g {\n    constructor(t, e) {\n      this.flippingPage = null, this.bottomPage = null, this.calc = null, this.state = \"read\", this.render = t, this.app = e;\n    }\n\n    fold(t) {\n      this.setState(\"user_fold\"), null === this.calc && this.start(t), this.do(this.render.convertToPage(t));\n    }\n\n    flip(t) {\n      if (null !== this.calc && this.render.finishAnimation(), !this.start(t)) return;\n      const e = this.getBoundsRect();\n      this.setState(\"flipping\");\n      const i = e.height / 10,\n            s = \"bottom\" === this.calc.getCorner() ? e.height - i : i,\n            n = \"bottom\" === this.calc.getCorner() ? e.height : 0;\n      this.calc.calc({\n        x: e.pageWidth - i,\n        y: s\n      }), this.animateFlippingTo({\n        x: e.pageWidth - i,\n        y: s\n      }, {\n        x: -e.pageWidth,\n        y: n\n      }, !0);\n    }\n\n    start(t) {\n      this.reset();\n      const e = this.render.convertToBook(t),\n            i = this.getBoundsRect(),\n            s = this.getDirectionByPoint(e),\n            n = e.y >= i.height / 2 ? \"bottom\" : \"top\";\n      if (!this.checkDirection(s)) return !1;\n\n      try {\n        if (this.flippingPage = this.app.getPageCollection().getFlippingPage(s), this.bottomPage = this.app.getPageCollection().getBottomPage(s), \"landscape\" === this.render.getOrientation()) if (1 === s) {\n          const t = this.app.getPageCollection().nextBy(this.flippingPage);\n          null !== t && this.flippingPage.getDensity() !== t.getDensity() && (this.flippingPage.setDrawingDensity(\"hard\"), t.setDrawingDensity(\"hard\"));\n        } else {\n          const t = this.app.getPageCollection().prevBy(this.flippingPage);\n          null !== t && this.flippingPage.getDensity() !== t.getDensity() && (this.flippingPage.setDrawingDensity(\"hard\"), t.setDrawingDensity(\"hard\"));\n        }\n        return this.render.setDirection(s), this.calc = new r(s, n, i.pageWidth.toString(10), i.height.toString(10)), !0;\n      } catch (t) {\n        return !1;\n      }\n    }\n\n    do(t) {\n      if (null !== this.calc && this.calc.calc(t)) {\n        const t = this.calc.getFlippingProgress();\n        this.bottomPage.setArea(this.calc.getBottomClipArea()), this.bottomPage.setPosition(this.calc.getBottomPagePosition()), this.bottomPage.setAngle(0), this.bottomPage.setHardAngle(0), this.flippingPage.setArea(this.calc.getFlippingClipArea()), this.flippingPage.setPosition(this.calc.getActiveCorner()), this.flippingPage.setAngle(this.calc.getAngle()), 0 === this.calc.getDirection() ? this.flippingPage.setHardAngle(90 * (200 - 2 * t) / 100) : this.flippingPage.setHardAngle(-90 * (200 - 2 * t) / 100), this.render.setPageRect(this.calc.getRect()), this.render.setBottomPage(this.bottomPage), this.render.setFlippingPage(this.flippingPage), this.render.setShadowData(this.calc.getShadowStartPoint(), this.calc.getShadowAngle(), t, this.calc.getDirection());\n      }\n    }\n\n    flipToPage(t, e) {\n      const i = this.app.getPageCollection().getCurrentSpreadIndex(),\n            s = this.app.getPageCollection().getSpreadIndexByPage(t);\n\n      try {\n        s > i && (this.app.getPageCollection().setCurrentSpreadIndex(s - 1), this.flipNext(e)), s < i && (this.app.getPageCollection().setCurrentSpreadIndex(s + 1), this.flipPrev(e));\n      } catch (t) {}\n    }\n\n    flipNext(t) {\n      this.flip({\n        x: this.render.getRect().left + 2 * this.render.getRect().pageWidth,\n        y: \"top\" === t ? 1 : this.render.getRect().height - 2\n      });\n    }\n\n    flipPrev(t) {\n      this.flip({\n        x: 10,\n        y: \"top\" === t ? 1 : this.render.getRect().height - 2\n      });\n    }\n\n    stopMove() {\n      if (null === this.calc) return;\n      const t = this.calc.getPosition(),\n            e = this.getBoundsRect(),\n            i = \"bottom\" === this.calc.getCorner() ? e.height : 0;\n      t.x <= 0 ? this.animateFlippingTo(t, {\n        x: -e.pageWidth,\n        y: i\n      }, !0) : this.animateFlippingTo(t, {\n        x: e.pageWidth,\n        y: i\n      }, !1);\n    }\n\n    showCorner(t) {\n      if (!this.checkState(\"read\", \"fold_corner\")) return;\n      const e = this.getBoundsRect(),\n            i = e.pageWidth,\n            s = Math.sqrt(Math.pow(i, 2) + Math.pow(e.height, 2)) / 5,\n            n = this.render.convertToBook(t);\n      if (n.x > 0 && n.y > 0 && n.x < e.width && n.y < e.height && (n.x < s || n.x > e.width - s) && (n.y < s || n.y > e.height - s)) {\n        if (null === this.calc) {\n          if (!this.start(t)) return;\n          this.setState(\"fold_corner\"), this.calc.calc({\n            x: i - 1,\n            y: 1\n          });\n          const s = 50,\n                n = \"bottom\" === this.calc.getCorner() ? e.height - 1 : 1,\n                h = \"bottom\" === this.calc.getCorner() ? e.height - s : s;\n          this.animateFlippingTo({\n            x: i - 1,\n            y: n\n          }, {\n            x: i - s,\n            y: h\n          }, !1, !1);\n        } else this.do(this.render.convertToPage(t));\n      } else this.setState(\"read\"), this.render.finishAnimation(), this.stopMove();\n    }\n\n    animateFlippingTo(t, e, i, s = !0) {\n      const n = h.GetCordsFromTwoPoint(t, e),\n            o = [];\n\n      for (const t of n) o.push(() => this.do(t));\n\n      const a = this.getAnimationDuration(n.length);\n      this.render.startAnimation(o, a, () => {\n        this.calc && (i && (1 === this.calc.getDirection() ? this.app.turnToPrevPage() : this.app.turnToNextPage()), s && (this.render.setBottomPage(null), this.render.setFlippingPage(null), this.render.clearShadow(), this.setState(\"read\"), this.reset()));\n      });\n    }\n\n    getCalculation() {\n      return this.calc;\n    }\n\n    getState() {\n      return this.state;\n    }\n\n    setState(t) {\n      this.state !== t && (this.app.updateState(t), this.state = t);\n    }\n\n    getDirectionByPoint(t) {\n      const e = this.getBoundsRect();\n\n      if (\"portrait\" === this.render.getOrientation()) {\n        if (t.x - e.pageWidth <= e.width / 5) return 1;\n      } else if (t.x < e.width / 2) return 1;\n\n      return 0;\n    }\n\n    getAnimationDuration(t) {\n      const e = this.app.getSettings().flippingTime;\n      return t >= 1e3 ? e : t / 1e3 * e;\n    }\n\n    checkDirection(t) {\n      return 0 === t ? this.app.getCurrentPageIndex() < this.app.getPageCount() - 1 : this.app.getCurrentPageIndex() >= 1;\n    }\n\n    reset() {\n      this.calc = null, this.flippingPage = null, this.bottomPage = null;\n    }\n\n    getBoundsRect() {\n      return this.render.getRect();\n    }\n\n    checkState(...t) {\n      for (const e of t) if (this.state === e) return !0;\n\n      return !1;\n    }\n\n  }\n\n  class l {\n    constructor(t, e) {\n      this.leftPage = null, this.rightPage = null, this.flippingPage = null, this.bottomPage = null, this.direction = null, this.orientation = null, this.shadow = null, this.animation = null, this.pageRect = null, this.boundsRect = null, this.timer = 0, this.safari = !1, this.setting = e, this.app = t;\n      const i = new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");\n      this.safari = null !== i.exec(window.navigator.userAgent);\n    }\n\n    render(t) {\n      if (null !== this.animation) {\n        const e = Math.round((t - this.animation.startedAt) / this.animation.durationFrame);\n        e < this.animation.frames.length ? this.animation.frames[e]() : (this.animation.onAnimateEnd(), this.animation = null);\n      }\n\n      this.timer = t, this.drawFrame();\n    }\n\n    start() {\n      this.update();\n\n      const t = e => {\n        this.render(e), requestAnimationFrame(t);\n      };\n\n      requestAnimationFrame(t);\n    }\n\n    startAnimation(t, e, i) {\n      this.finishAnimation(), this.animation = {\n        frames: t,\n        duration: e,\n        durationFrame: e / t.length,\n        onAnimateEnd: i,\n        startedAt: this.timer\n      };\n    }\n\n    finishAnimation() {\n      null !== this.animation && (this.animation.frames[this.animation.frames.length - 1](), null !== this.animation.onAnimateEnd && this.animation.onAnimateEnd()), this.animation = null;\n    }\n\n    update() {\n      this.boundsRect = null;\n      const t = this.calculateBoundsRect();\n      this.orientation !== t && (this.orientation = t, this.app.updateOrientation(t));\n    }\n\n    calculateBoundsRect() {\n      let t = \"landscape\";\n      const e = this.getBlockWidth(),\n            i = e / 2,\n            s = this.getBlockHeight() / 2,\n            n = this.setting.width / this.setting.height;\n      let h = this.setting.width,\n          o = this.setting.height,\n          a = i - h;\n      return \"stretch\" === this.setting.size ? (e < 2 * this.setting.minWidth && this.app.getSettings().usePortrait && (t = \"portrait\"), h = \"portrait\" === t ? this.getBlockWidth() : this.getBlockWidth() / 2, h > this.setting.maxWidth && (h = this.setting.maxWidth), o = h / n, o > this.getBlockHeight() && (o = this.getBlockHeight(), h = o * n), a = \"portrait\" === t ? i - h / 2 - h : i - h) : e < 2 * h && this.app.getSettings().usePortrait && (t = \"portrait\", a = i - h / 2 - h), this.boundsRect = {\n        left: a,\n        top: s - o / 2,\n        width: 2 * h,\n        height: o,\n        pageWidth: h\n      }, t;\n    }\n\n    setShadowData(t, e, i, s) {\n      if (!this.app.getSettings().drawShadow) return;\n      const n = 100 * this.getSettings().maxShadowOpacity;\n      this.shadow = {\n        pos: t,\n        angle: e,\n        width: 3 * this.getRect().pageWidth / 4 * i / 100,\n        opacity: (100 - i) * n / 100 / 100,\n        direction: s,\n        progress: 2 * i\n      };\n    }\n\n    clearShadow() {\n      this.shadow = null;\n    }\n\n    getBlockWidth() {\n      return this.app.getUI().getDistElement().offsetWidth;\n    }\n\n    getBlockHeight() {\n      return this.app.getUI().getDistElement().offsetHeight;\n    }\n\n    getDirection() {\n      return this.direction;\n    }\n\n    getRect() {\n      return null === this.boundsRect && this.calculateBoundsRect(), this.boundsRect;\n    }\n\n    getSettings() {\n      return this.app.getSettings();\n    }\n\n    getOrientation() {\n      return this.orientation;\n    }\n\n    setPageRect(t) {\n      this.pageRect = t;\n    }\n\n    setDirection(t) {\n      this.direction = t;\n    }\n\n    setRightPage(t) {\n      null !== t && t.setOrientation(1), this.rightPage = t;\n    }\n\n    setLeftPage(t) {\n      null !== t && t.setOrientation(0), this.leftPage = t;\n    }\n\n    setBottomPage(t) {\n      null !== t && t.setOrientation(1 === this.direction ? 0 : 1), this.bottomPage = t;\n    }\n\n    setFlippingPage(t) {\n      null !== t && t.setOrientation(0 === this.direction && \"portrait\" !== this.orientation ? 0 : 1), this.flippingPage = t;\n    }\n\n    convertToBook(t) {\n      const e = this.getRect();\n      return {\n        x: t.x - e.left,\n        y: t.y - e.top\n      };\n    }\n\n    isSafari() {\n      return this.safari;\n    }\n\n    convertToPage(t, e) {\n      e || (e = this.direction);\n      const i = this.getRect();\n      return {\n        x: 0 === e ? t.x - i.left - i.width / 2 : i.width / 2 - t.x + i.left,\n        y: t.y - i.top\n      };\n    }\n\n    convertToGlobal(t, e) {\n      if (e || (e = this.direction), null == t) return null;\n      const i = this.getRect();\n      return {\n        x: 0 === e ? t.x + i.left + i.width / 2 : i.width / 2 - t.x + i.left,\n        y: t.y + i.top\n      };\n    }\n\n    convertRectToGlobal(t, e) {\n      return e || (e = this.direction), {\n        topLeft: this.convertToGlobal(t.topLeft, e),\n        topRight: this.convertToGlobal(t.topRight, e),\n        bottomLeft: this.convertToGlobal(t.bottomLeft, e),\n        bottomRight: this.convertToGlobal(t.bottomRight, e)\n      };\n    }\n\n  }\n\n  class d extends l {\n    constructor(t, e, i) {\n      super(t, e), this.canvas = i, this.ctx = i.getContext(\"2d\");\n    }\n\n    getContext() {\n      return this.ctx;\n    }\n\n    drawFrame() {\n      this.clear(), \"portrait\" !== this.orientation && null != this.leftPage && this.leftPage.simpleDraw(0), null != this.rightPage && this.rightPage.simpleDraw(1), null != this.bottomPage && this.bottomPage.draw(), this.drawBookShadow(), null != this.flippingPage && this.flippingPage.draw(), null != this.shadow && (this.drawOuterShadow(), this.drawInnerShadow());\n      const t = this.getRect();\n      \"portrait\" === this.orientation && (this.ctx.beginPath(), this.ctx.rect(t.left + t.pageWidth, t.top, t.width, t.height), this.ctx.clip());\n    }\n\n    drawBookShadow() {\n      const t = this.getRect();\n      this.ctx.save(), this.ctx.beginPath();\n      const e = t.width / 20;\n      this.ctx.rect(t.left, t.top, t.width, t.height);\n      const i = {\n        x: t.left + t.width / 2 - e / 2,\n        y: 0\n      };\n      this.ctx.translate(i.x, i.y);\n      const s = this.ctx.createLinearGradient(0, 0, e, 0);\n      s.addColorStop(0, \"rgba(0, 0, 0, 0)\"), s.addColorStop(.4, \"rgba(0, 0, 0, 0.2)\"), s.addColorStop(.49, \"rgba(0, 0, 0, 0.1)\"), s.addColorStop(.5, \"rgba(0, 0, 0, 0.5)\"), s.addColorStop(.51, \"rgba(0, 0, 0, 0.4)\"), s.addColorStop(1, \"rgba(0, 0, 0, 0)\"), this.ctx.clip(), this.ctx.fillStyle = s, this.ctx.fillRect(0, 0, e, 2 * t.height), this.ctx.restore();\n    }\n\n    drawOuterShadow() {\n      const t = this.getRect();\n      this.ctx.save(), this.ctx.beginPath(), this.ctx.rect(t.left, t.top, t.width, t.height);\n      const e = this.convertToGlobal({\n        x: this.shadow.pos.x,\n        y: this.shadow.pos.y\n      });\n      this.ctx.translate(e.x, e.y), this.ctx.rotate(Math.PI + this.shadow.angle + Math.PI / 2);\n      const i = this.ctx.createLinearGradient(0, 0, this.shadow.width, 0);\n      0 === this.shadow.direction ? (this.ctx.translate(0, -100), i.addColorStop(0, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), i.addColorStop(1, \"rgba(0, 0, 0, 0)\")) : (this.ctx.translate(-this.shadow.width, -100), i.addColorStop(0, \"rgba(0, 0, 0, 0)\"), i.addColorStop(1, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\")), this.ctx.clip(), this.ctx.fillStyle = i, this.ctx.fillRect(0, 0, this.shadow.width, 2 * t.height), this.ctx.restore();\n    }\n\n    drawInnerShadow() {\n      const t = this.getRect();\n      this.ctx.save(), this.ctx.beginPath();\n      const e = this.convertToGlobal({\n        x: this.shadow.pos.x,\n        y: this.shadow.pos.y\n      }),\n            i = this.convertRectToGlobal(this.pageRect);\n      this.ctx.moveTo(i.topLeft.x, i.topLeft.y), this.ctx.lineTo(i.topRight.x, i.topRight.y), this.ctx.lineTo(i.bottomRight.x, i.bottomRight.y), this.ctx.lineTo(i.bottomLeft.x, i.bottomLeft.y), this.ctx.translate(e.x, e.y), this.ctx.rotate(Math.PI + this.shadow.angle + Math.PI / 2);\n      const s = 3 * this.shadow.width / 4,\n            n = this.ctx.createLinearGradient(0, 0, s, 0);\n      0 === this.shadow.direction ? (this.ctx.translate(-s, -100), n.addColorStop(1, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(.9, \"rgba(0, 0, 0, 0.05)\"), n.addColorStop(.7, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(0, \"rgba(0, 0, 0, 0)\")) : (this.ctx.translate(0, -100), n.addColorStop(0, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(.1, \"rgba(0, 0, 0, 0.05)\"), n.addColorStop(.3, \"rgba(0, 0, 0, \" + this.shadow.opacity + \")\"), n.addColorStop(1, \"rgba(0, 0, 0, 0)\")), this.ctx.clip(), this.ctx.fillStyle = n, this.ctx.fillRect(0, 0, s, 2 * t.height), this.ctx.restore();\n    }\n\n    clear() {\n      this.ctx.fillStyle = \"white\", this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n  }\n\n  class p {\n    constructor(t, e, i) {\n      this.touchPoint = null, this.swipeTimeout = 250, this.onResize = () => {\n        this.update();\n      }, this.onMouseDown = t => {\n        if (this.checkTarget(t.target)) {\n          const e = this.getMousePos(t.clientX, t.clientY);\n          this.app.startUserTouch(e), t.preventDefault();\n        }\n      }, this.onTouchStart = t => {\n        if (this.checkTarget(t.target) && t.changedTouches.length > 0) {\n          const e = t.changedTouches[0],\n                i = this.getMousePos(e.clientX, e.clientY);\n          this.touchPoint = {\n            point: i,\n            time: Date.now()\n          }, setTimeout(() => {\n            null !== this.touchPoint && this.app.startUserTouch(i);\n          }, this.swipeTimeout), this.app.getSettings().mobileScrollSupport || t.preventDefault();\n        }\n      }, this.onMouseUp = t => {\n        const e = this.getMousePos(t.clientX, t.clientY);\n        this.app.userStop(e);\n      }, this.onMouseMove = t => {\n        const e = this.getMousePos(t.clientX, t.clientY);\n        this.app.userMove(e, !1);\n      }, this.onTouchMove = t => {\n        if (t.changedTouches.length > 0) {\n          const e = t.changedTouches[0],\n                i = this.getMousePos(e.clientX, e.clientY);\n          this.app.getSettings().mobileScrollSupport ? (null !== this.touchPoint && (Math.abs(this.touchPoint.point.x - i.x) > 10 || \"read\" !== this.app.getState()) && t.cancelable && this.app.userMove(i, !0), \"read\" !== this.app.getState() && t.preventDefault()) : this.app.userMove(i, !0);\n        }\n      }, this.onTouchEnd = t => {\n        if (t.changedTouches.length > 0) {\n          const e = t.changedTouches[0],\n                i = this.getMousePos(e.clientX, e.clientY);\n          let s = !1;\n\n          if (null !== this.touchPoint) {\n            const t = i.x - this.touchPoint.point.x,\n                  e = Math.abs(i.y - this.touchPoint.point.y);\n            Math.abs(t) > this.swipeDistance && e < 2 * this.swipeDistance && Date.now() - this.touchPoint.time < this.swipeTimeout && (t > 0 ? this.app.flipPrev(this.touchPoint.point.y < this.app.getRender().getRect().height / 2 ? \"top\" : \"bottom\") : this.app.flipNext(this.touchPoint.point.y < this.app.getRender().getRect().height / 2 ? \"top\" : \"bottom\"), s = !0), this.touchPoint = null;\n          }\n\n          this.app.userStop(i, s);\n        }\n      }, t.classList.add(\"stf__parent\"), t.insertAdjacentHTML(\"afterbegin\", '<div class=\"stf__wrapper\"></div>'), this.wrapper = t.querySelector(\".stf__wrapper\"), this.app = e;\n      const s = this.app.getSettings().usePortrait ? 1 : 2;\n      t.style.minWidth = i.minWidth * s + \"px\", t.style.minHeight = i.minHeight + \"px\", \"fixed\" === i.size && (t.style.minWidth = i.width * s + \"px\", t.style.minHeight = i.height + \"px\"), i.autoSize && (t.style.width = \"100%\", t.style.maxWidth = 2 * i.maxWidth + \"px\"), t.style.display = \"block\", window.addEventListener(\"resize\", this.onResize, !1), this.swipeDistance = i.swipeDistance;\n    }\n\n    destroy() {\n      this.app.getSettings().useMouseEvents && this.removeHandlers(), this.distElement.remove(), this.wrapper.remove();\n    }\n\n    getDistElement() {\n      return this.distElement;\n    }\n\n    getWrapper() {\n      return this.wrapper;\n    }\n\n    setOrientationStyle(t) {\n      this.wrapper.classList.remove(\"--portrait\", \"--landscape\"), \"portrait\" === t ? (this.app.getSettings().autoSize && (this.wrapper.style.paddingBottom = this.app.getSettings().height / this.app.getSettings().width * 100 + \"%\"), this.wrapper.classList.add(\"--portrait\")) : (this.app.getSettings().autoSize && (this.wrapper.style.paddingBottom = this.app.getSettings().height / (2 * this.app.getSettings().width) * 100 + \"%\"), this.wrapper.classList.add(\"--landscape\")), this.update();\n    }\n\n    removeHandlers() {\n      window.removeEventListener(\"resize\", this.onResize), this.distElement.removeEventListener(\"mousedown\", this.onMouseDown), this.distElement.removeEventListener(\"touchstart\", this.onTouchStart), window.removeEventListener(\"mousemove\", this.onMouseMove), window.removeEventListener(\"touchmove\", this.onTouchMove), window.removeEventListener(\"mouseup\", this.onMouseUp), window.removeEventListener(\"touchend\", this.onTouchEnd);\n    }\n\n    setHandlers() {\n      this.app.getSettings().useMouseEvents && (this.distElement.addEventListener(\"mousedown\", this.onMouseDown), this.distElement.addEventListener(\"touchstart\", this.onTouchStart), window.addEventListener(\"mousemove\", this.onMouseMove), window.addEventListener(\"touchmove\", this.onTouchMove, {\n        passive: !this.app.getSettings().mobileScrollSupport\n      }), window.addEventListener(\"mouseup\", this.onMouseUp), window.addEventListener(\"touchend\", this.onTouchEnd));\n    }\n\n    getMousePos(t, e) {\n      const i = this.distElement.getBoundingClientRect();\n      return {\n        x: t - i.left,\n        y: e - i.top\n      };\n    }\n\n    checkTarget(t) {\n      return !this.app.getSettings().clickEventForward || ![\"a\", \"button\"].includes(t.tagName.toLowerCase());\n    }\n\n  }\n\n  class c extends p {\n    constructor(t, e, i, s) {\n      super(t, e, i), this.wrapper.insertAdjacentHTML(\"afterbegin\", '<div class=\"stf__block\"></div>'), this.distElement = t.querySelector(\".stf__block\");\n\n      for (const t of s) this.distElement.appendChild(t);\n\n      this.setHandlers();\n    }\n\n    updateItems(t) {\n      this.removeHandlers(), this.distElement.innerHTML = \"\";\n\n      for (const e of t) this.distElement.appendChild(e);\n\n      this.setHandlers();\n    }\n\n    update() {\n      this.app.getRender().update();\n    }\n\n  }\n\n  class u extends p {\n    constructor(t, e, i) {\n      super(t, e, i), this.wrapper.innerHTML = '<canvas class=\"stf__canvas\"></canvas>', this.canvas = t.querySelectorAll(\"canvas\")[0], this.distElement = this.canvas, this.resizeCanvas(), this.setHandlers();\n    }\n\n    resizeCanvas() {\n      const t = getComputedStyle(this.canvas),\n            e = parseInt(t.getPropertyValue(\"width\"), 10),\n            i = parseInt(t.getPropertyValue(\"height\"), 10);\n      this.canvas.width = e, this.canvas.height = i;\n    }\n\n    getCanvas() {\n      return this.canvas;\n    }\n\n    update() {\n      this.resizeCanvas(), this.app.getRender().update();\n    }\n\n  }\n\n  class w extends l {\n    constructor(t, e, i) {\n      super(t, e), this.outerShadow = null, this.innerShadow = null, this.hardShadow = null, this.hardInnerShadow = null, this.element = i, this.createShadows();\n    }\n\n    createShadows() {\n      this.element.insertAdjacentHTML(\"beforeend\", '<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'), this.outerShadow = this.element.querySelector(\".stf__outerShadow\"), this.innerShadow = this.element.querySelector(\".stf__innerShadow\"), this.hardShadow = this.element.querySelector(\".stf__hardShadow\"), this.hardInnerShadow = this.element.querySelector(\".stf__hardInnerShadow\");\n    }\n\n    clearShadow() {\n      super.clearShadow(), this.outerShadow.style.cssText = \"display: none\", this.innerShadow.style.cssText = \"display: none\", this.hardShadow.style.cssText = \"display: none\", this.hardInnerShadow.style.cssText = \"display: none\";\n    }\n\n    drawHardInnerShadow() {\n      const t = this.getRect(),\n            e = this.shadow.progress > 100 ? 200 - this.shadow.progress : this.shadow.progress;\n      let i = (100 - e) * (2.5 * t.pageWidth) / 100 + 20;\n      i > t.pageWidth && (i = t.pageWidth);\n      let s = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity * e / 100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left + t.width / 2}px;\\n            transform-origin: 0 0;\\n        `;\n      s += 0 === this.getDirection() && this.shadow.progress > 100 || 1 === this.getDirection() && this.shadow.progress <= 100 ? \"transform: translate3d(0, 0, 0);\" : \"transform: translate3d(0, 0, 0) rotateY(180deg);\", this.hardInnerShadow.style.cssText = s;\n    }\n\n    drawHardOuterShadow() {\n      const t = this.getRect();\n      let e = (100 - (this.shadow.progress > 100 ? 200 - this.shadow.progress : this.shadow.progress)) * (2.5 * t.pageWidth) / 100 + 20;\n      e > t.pageWidth && (e = t.pageWidth);\n      let i = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left + t.width / 2}px;\\n            transform-origin: 0 0;\\n        `;\n      i += 0 === this.getDirection() && this.shadow.progress > 100 || 1 === this.getDirection() && this.shadow.progress <= 100 ? \"transform: translate3d(0, 0, 0) rotateY(180deg);\" : \"transform: translate3d(0, 0, 0);\", this.hardShadow.style.cssText = i;\n    }\n\n    drawInnerShadow() {\n      const t = this.getRect(),\n            e = 3 * this.shadow.width / 4,\n            i = 0 === this.getDirection() ? e : 0,\n            s = 0 === this.getDirection() ? \"to left\" : \"to right\",\n            n = this.convertToGlobal(this.shadow.pos),\n            o = this.shadow.angle + 3 * Math.PI / 2,\n            a = [this.pageRect.topLeft, this.pageRect.topRight, this.pageRect.bottomRight, this.pageRect.bottomLeft];\n      let r = \"polygon( \";\n\n      for (const t of a) {\n        let e = 1 === this.getDirection() ? {\n          x: -t.x + this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        } : {\n          x: t.x - this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        };\n        e = h.GetRotatedPoint(e, {\n          x: i,\n          y: 100\n        }, o), r += e.x + \"px \" + e.y + \"px, \";\n      }\n\n      r = r.slice(0, -2), r += \")\";\n      const g = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 10).toString(10)};\\n            width: ${e}px;\\n            height: ${2 * t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x - i}px, ${n.y - 100}px, 0) rotate(${o}rad);\\n            clip-path: ${r};\\n            -webkit-clip-path: ${r};\\n        `;\n      this.innerShadow.style.cssText = g;\n    }\n\n    drawOuterShadow() {\n      const t = this.getRect(),\n            e = this.convertToGlobal({\n        x: this.shadow.pos.x,\n        y: this.shadow.pos.y\n      }),\n            i = this.shadow.angle + 3 * Math.PI / 2,\n            s = 1 === this.getDirection() ? this.shadow.width : 0,\n            n = 0 === this.getDirection() ? \"to right\" : \"to left\",\n            o = [{\n        x: 0,\n        y: 0\n      }, {\n        x: t.pageWidth,\n        y: 0\n      }, {\n        x: t.pageWidth,\n        y: t.height\n      }, {\n        x: 0,\n        y: t.height\n      }];\n      let a = \"polygon( \";\n\n      for (const t of o) if (null !== t) {\n        let e = 1 === this.getDirection() ? {\n          x: -t.x + this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        } : {\n          x: t.x - this.shadow.pos.x,\n          y: t.y - this.shadow.pos.y\n        };\n        e = h.GetRotatedPoint(e, {\n          x: s,\n          y: 100\n        }, i), a += e.x + \"px \" + e.y + \"px, \";\n      }\n\n      a = a.slice(0, -2), a += \")\";\n      const r = `\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex + 10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2 * t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x - s}px, ${e.y - 100}px, 0) rotate(${i}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;\n      this.outerShadow.style.cssText = r;\n    }\n\n    drawLeftPage() {\n      \"portrait\" !== this.orientation && null !== this.leftPage && (1 === this.direction && null !== this.flippingPage && \"hard\" === this.flippingPage.getDrawingDensity() ? (this.leftPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.leftPage.setHardDrawingAngle(180 + this.flippingPage.getHardAngle()), this.leftPage.draw(this.flippingPage.getDrawingDensity())) : this.leftPage.simpleDraw(0));\n    }\n\n    drawRightPage() {\n      null !== this.rightPage && (0 === this.direction && null !== this.flippingPage && \"hard\" === this.flippingPage.getDrawingDensity() ? (this.rightPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.rightPage.setHardDrawingAngle(180 + this.flippingPage.getHardAngle()), this.rightPage.draw(this.flippingPage.getDrawingDensity())) : this.rightPage.simpleDraw(1));\n    }\n\n    drawBottomPage() {\n      if (null === this.bottomPage) return;\n      const t = null != this.flippingPage ? this.flippingPage.getDrawingDensity() : null;\n      \"portrait\" === this.orientation && 1 === this.direction || (this.bottomPage.getElement().style.zIndex = (this.getSettings().startZIndex + 3).toString(10), this.bottomPage.draw(t));\n    }\n\n    drawFrame() {\n      this.clear(), this.drawLeftPage(), this.drawRightPage(), this.drawBottomPage(), null != this.flippingPage && (this.flippingPage.getElement().style.zIndex = (this.getSettings().startZIndex + 5).toString(10), this.flippingPage.draw()), null != this.shadow && null !== this.flippingPage && (\"soft\" === this.flippingPage.getDrawingDensity() ? (this.drawOuterShadow(), this.drawInnerShadow()) : (this.drawHardOuterShadow(), this.drawHardInnerShadow()));\n    }\n\n    clear() {\n      for (const t of this.app.getPageCollection().getPages()) t !== this.leftPage && t !== this.rightPage && t !== this.flippingPage && t !== this.bottomPage && (t.getElement().style.cssText = \"display: none\"), t.getTemporaryCopy() !== this.flippingPage && t.hideTemporaryCopy();\n    }\n\n    update() {\n      super.update(), null !== this.rightPage && this.rightPage.setOrientation(1), null !== this.leftPage && this.leftPage.setOrientation(0);\n    }\n\n  }\n\n  class x {\n    constructor() {\n      this._default = {\n        startPage: 0,\n        size: \"fixed\",\n        width: 0,\n        height: 0,\n        minWidth: 0,\n        maxWidth: 0,\n        minHeight: 0,\n        maxHeight: 0,\n        drawShadow: !0,\n        flippingTime: 1e3,\n        usePortrait: !0,\n        startZIndex: 0,\n        autoSize: !0,\n        maxShadowOpacity: 1,\n        showCover: !1,\n        mobileScrollSupport: !0,\n        swipeDistance: 30,\n        clickEventForward: !0,\n        useMouseEvents: !0\n      };\n    }\n\n    getSettings(t) {\n      const e = this._default;\n      if (Object.assign(e, t), \"stretch\" !== e.size && \"fixed\" !== e.size) throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');\n      if (e.width <= 0 || e.height <= 0) throw new Error(\"Invalid width or height\");\n      if (e.flippingTime <= 0) throw new Error(\"Invalid flipping time\");\n      return \"stretch\" === e.size ? (e.minWidth <= 0 && (e.minWidth = 100), e.maxWidth < e.minWidth && (e.maxWidth = 2e3), e.minHeight <= 0 && (e.minHeight = 100), e.maxHeight < e.minHeight && (e.maxHeight = 2e3)) : (e.minWidth = e.width, e.maxWidth = e.width, e.minHeight = e.height, e.maxHeight = e.height), e;\n    }\n\n  }\n\n  !function (t, e) {\n    void 0 === e && (e = {});\n    var i = e.insertAt;\n\n    if (t && \"undefined\" != typeof document) {\n      var s = document.head || document.getElementsByTagName(\"head\")[0],\n          n = document.createElement(\"style\");\n      n.type = \"text/css\", \"top\" === i && s.firstChild ? s.insertBefore(n, s.firstChild) : s.appendChild(n), n.styleSheet ? n.styleSheet.cssText = t : n.appendChild(document.createTextNode(t));\n    }\n  }(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");\n  t.PageFlip = class extends class {\n    constructor() {\n      this.events = new Map();\n    }\n\n    on(t, e) {\n      return this.events.has(t) ? this.events.get(t).push(e) : this.events.set(t, [e]), this;\n    }\n\n    off(t) {\n      this.events.delete(t);\n    }\n\n    trigger(t, e, i = null) {\n      if (this.events.has(t)) for (const s of this.events.get(t)) s({\n        data: i,\n        object: e\n      });\n    }\n\n  } {\n    constructor(t, e) {\n      super(), this.isUserTouch = !1, this.isUserMove = !1, this.setting = null, this.pages = null, this.setting = new x().getSettings(e), this.block = t;\n    }\n\n    destroy() {\n      this.ui.destroy(), this.block.remove();\n    }\n\n    update() {\n      this.render.update(), this.pages.show();\n    }\n\n    loadFromImages(t) {\n      this.ui = new u(this.block, this, this.setting);\n      const e = this.ui.getCanvas();\n      this.render = new d(this, this.setting, e), this.flipController = new g(this.render, this), this.pages = new n(this, this.render, t), this.pages.load(), this.render.start(), this.pages.show(this.setting.startPage), setTimeout(() => {\n        this.ui.update(), this.trigger(\"init\", this, {\n          page: this.setting.startPage,\n          mode: this.render.getOrientation()\n        });\n      }, 1);\n    }\n\n    loadFromHTML(t) {\n      this.ui = new c(this.block, this, this.setting, t), this.render = new w(this, this.setting, this.ui.getDistElement()), this.flipController = new g(this.render, this), this.pages = new a(this, this.render, this.ui.getDistElement(), t), this.pages.load(), this.render.start(), this.pages.show(this.setting.startPage), setTimeout(() => {\n        this.ui.update(), this.trigger(\"init\", this, {\n          page: this.setting.startPage,\n          mode: this.render.getOrientation()\n        });\n      }, 1);\n    }\n\n    updateFromImages(t) {\n      const e = this.pages.getCurrentPageIndex();\n      this.pages.destroy(), this.pages = new n(this, this.render, t), this.pages.load(), this.pages.show(e), this.trigger(\"update\", this, {\n        page: e,\n        mode: this.render.getOrientation()\n      });\n    }\n\n    updateFromHtml(t) {\n      const e = this.pages.getCurrentPageIndex();\n      this.pages.destroy(), this.pages = new a(this, this.render, this.ui.getDistElement(), t), this.pages.load(), this.ui.updateItems(t), this.pages.show(e), this.trigger(\"update\", this, {\n        page: e,\n        mode: this.render.getOrientation()\n      });\n    }\n\n    turnToPrevPage() {\n      this.pages.showPrev();\n    }\n\n    turnToNextPage() {\n      this.pages.showNext();\n    }\n\n    turnToPage(t) {\n      this.pages.show(t);\n    }\n\n    flipNext(t = \"top\") {\n      this.flipController.flipNext(t);\n    }\n\n    flipPrev(t = \"top\") {\n      this.flipController.flipPrev(t);\n    }\n\n    flip(t, e = \"top\") {\n      this.flipController.flipToPage(t, e);\n    }\n\n    updateState(t) {\n      this.trigger(\"changeState\", this, t);\n    }\n\n    updatePageIndex(t) {\n      this.trigger(\"flip\", this, t);\n    }\n\n    updateOrientation(t) {\n      this.ui.setOrientationStyle(t), this.update(), this.trigger(\"changeOrientation\", this, t);\n    }\n\n    getPageCount() {\n      return this.pages.getPageCount();\n    }\n\n    getCurrentPageIndex() {\n      return this.pages.getCurrentPageIndex();\n    }\n\n    getPage(t) {\n      return this.pages.getPage(t);\n    }\n\n    getRender() {\n      return this.render;\n    }\n\n    getFlipController() {\n      return this.flipController;\n    }\n\n    getOrientation() {\n      return this.render.getOrientation();\n    }\n\n    getBoundsRect() {\n      return this.render.getRect();\n    }\n\n    getSettings() {\n      return this.setting;\n    }\n\n    getUI() {\n      return this.ui;\n    }\n\n    getState() {\n      return this.flipController.getState();\n    }\n\n    getPageCollection() {\n      return this.pages;\n    }\n\n    startUserTouch(t) {\n      this.mousePosition = t, this.isUserTouch = !0, this.isUserMove = !1;\n    }\n\n    userMove(t, e) {\n      this.isUserTouch || e ? this.isUserTouch && h.GetDistanceBetweenTwoPoint(this.mousePosition, t) > 5 && (this.isUserMove = !0, this.flipController.fold(t)) : this.flipController.showCorner(t);\n    }\n\n    userStop(t, e = !1) {\n      this.isUserTouch && (this.isUserTouch = !1, e || (this.isUserMove ? this.flipController.stopMove() : this.flipController.flip(t)));\n    }\n\n  }, Object.defineProperty(t, \"__esModule\", {\n    value: !0\n  });\n});","map":{"version":3,"sources":["/Users/martinraba/Desktop/book_app/node_modules/page-flip/dist/js/page-flip.browser.js"],"names":["t","e","exports","module","define","amd","self","St","constructor","state","angle","area","position","x","y","hardAngle","hardDrawingAngle","createdDensity","nowDrawingDensity","render","setDensity","setDrawingDensity","setPosition","setAngle","setArea","setHardDrawingAngle","setHardAngle","setOrientation","orientation","getDrawingDensity","getDensity","getHardAngle","i","image","isLoad","loadingAngle","Image","src","draw","getContext","convertToGlobal","s","getRect","pageWidth","n","height","save","translate","beginPath","lineTo","rotate","clip","drawImage","drawLoader","restore","simpleDraw","h","left","o","top","strokeStyle","fillStyle","lineWidth","rect","stroke","fill","arc","Math","PI","closePath","load","onload","newTemporaryCopy","getTemporaryCopy","hideTemporaryCopy","pages","currentPageIndex","currentSpreadIndex","landscapeSpread","portraitSpread","app","isShowCover","getSettings","showCover","destroy","createSpread","length","push","getSpread","getOrientation","getSpreadIndexByPage","getPageCount","getPages","getPage","Error","nextBy","indexOf","prevBy","getFlippingPage","getBottomPage","showNext","showSpread","showPrev","getCurrentPageIndex","show","getCurrentSpreadIndex","setCurrentSpreadIndex","setLeftPage","setRightPage","updatePageIndex","imagesHref","GetDistanceBetweenTwoPoint","sqrt","pow","GetSegmentLength","GetAngleBetweenTwoLine","acos","PointInRect","width","GetRotatedPoint","cos","sin","LimitPointToCircle","a","r","g","GetIntersectBetweenTwoSegment","GetIntersectBeetwenTwoLine","l","d","isFinite","abs","GetCordsFromTwoPoint","max","copiedElement","temporaryCopy","element","classList","add","cloneNode","parentElement","appendChild","remove","style","zIndex","drawHard","drawSoft","cssText","getDirection","slice","isSafari","startZIndex","getElement","pagesElement","dataset","density","direction","corner","topIntersectPoint","sideIntersectPoint","bottomIntersectPoint","parseInt","pageHeight","calc","calcAngleAndPosition","calculateIntersectPoint","getFlippingClipArea","topLeft","bottomLeft","getBottomClipArea","getAngle","getPosition","getActiveCorner","topRight","getFlippingProgress","getCorner","getBottomPagePosition","getShadowStartPoint","getShadowAngle","getSegmentToShadowLine","updateAngleAndGeometry","checkPositionAtCenterLine","calculateAngle","getPageRect","getRectFromBasePoint","getRotatedPoint","bottomRight","flippingPage","bottomPage","fold","setState","start","do","convertToPage","flip","finishAnimation","getBoundsRect","animateFlippingTo","reset","convertToBook","getDirectionByPoint","checkDirection","getPageCollection","setDirection","toString","setPageRect","setBottomPage","setFlippingPage","setShadowData","flipToPage","flipNext","flipPrev","stopMove","showCorner","checkState","getAnimationDuration","startAnimation","turnToPrevPage","turnToNextPage","clearShadow","getCalculation","getState","updateState","flippingTime","leftPage","rightPage","shadow","animation","pageRect","boundsRect","timer","safari","setting","RegExp","exec","window","navigator","userAgent","round","startedAt","durationFrame","frames","onAnimateEnd","drawFrame","update","requestAnimationFrame","duration","calculateBoundsRect","updateOrientation","getBlockWidth","getBlockHeight","size","minWidth","usePortrait","maxWidth","drawShadow","maxShadowOpacity","pos","opacity","progress","getUI","getDistElement","offsetWidth","offsetHeight","convertRectToGlobal","canvas","ctx","clear","drawBookShadow","drawOuterShadow","drawInnerShadow","createLinearGradient","addColorStop","fillRect","moveTo","p","touchPoint","swipeTimeout","onResize","onMouseDown","checkTarget","target","getMousePos","clientX","clientY","startUserTouch","preventDefault","onTouchStart","changedTouches","point","time","Date","now","setTimeout","mobileScrollSupport","onMouseUp","userStop","onMouseMove","userMove","onTouchMove","cancelable","onTouchEnd","swipeDistance","getRender","insertAdjacentHTML","wrapper","querySelector","minHeight","autoSize","display","addEventListener","useMouseEvents","removeHandlers","distElement","getWrapper","setOrientationStyle","paddingBottom","removeEventListener","setHandlers","passive","getBoundingClientRect","clickEventForward","includes","tagName","toLowerCase","c","updateItems","innerHTML","u","querySelectorAll","resizeCanvas","getComputedStyle","getPropertyValue","getCanvas","w","outerShadow","innerShadow","hardShadow","hardInnerShadow","createShadows","drawHardInnerShadow","drawHardOuterShadow","drawLeftPage","drawRightPage","drawBottomPage","_default","startPage","maxHeight","Object","assign","insertAt","document","head","getElementsByTagName","createElement","type","firstChild","insertBefore","styleSheet","createTextNode","PageFlip","events","Map","on","has","get","set","off","delete","trigger","data","object","isUserTouch","isUserMove","block","ui","loadFromImages","flipController","page","mode","loadFromHTML","updateFromImages","updateFromHtml","turnToPage","getFlipController","mousePosition","defineProperty","value"],"mappings":"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","sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e((t=t||self).St={})}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,o=e.top;this.isLoad?i.drawImage(this.image,h,o,s,n):this.drawLoader(i,{x:h,y:o},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,o=i.x,a=i.y;let r=Math.sqrt(Math.pow(e,2)*Math.pow(s-o,2)/(Math.pow(s-o,2)+Math.pow(n-a,2)))+s;i.x<0&&(r*=-1);let g=(r-s)*(n-a)/(s-o)+n;return s-o+n===0&&(g=e),{x:r,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,o=t[0].x*t[1].y-t[1].x*t[0].y,a=e[0].x*e[1].y-e[1].x*e[0].y,r=i*a-s*o,g=n*a-h*o,l=-(o*h-a*n)/(i*h-s*n),d=-(i*a-s*o)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(r-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function o(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let a=1;a<=n;a+=1)h.push({x:o(t.x,e.x,i,n,a),y:o(t.y,e.y,s,n,a)});return h}}class o extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new o(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class a extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new o(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class r{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const o=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let a=this.rect.bottomRight,r=this.rect.topLeft;if(\"bottom\"===this.corner&&(a=this.rect.topRight,r=this.rect.bottomLeft),a.x<=0){const t=h.LimitPointToCircle(i,o,r);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new r(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);if(n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),o=[];for(const t of n)o.push(()=>this.do(t));const a=this.getAnimationDuration(n.length);this.render.startAnimation(o,a,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,o=this.setting.height,a=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),o=h/n,o>this.getBlockHeight()&&(o=this.getBlockHeight(),h=o*n),a=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",a=i-h/2-h),this.boundsRect={left:a,top:s-o/2,width:2*h,height:o,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\");for(const t of s)this.distElement.appendChild(t);this.setHandlers()}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),o=this.shadow.angle+3*Math.PI/2,a=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let r=\"polygon( \";for(const t of a){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},o),r+=e.x+\"px \"+e.y+\"px, \"}r=r.slice(0,-2),r+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${o}rad);\\n            clip-path: ${r};\\n            -webkit-clip-path: ${r};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",o=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let a=\"polygon( \";for(const t of o)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const r=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.outerShadow.style.cssText=r}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new a(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n"]},"metadata":{},"sourceType":"script"}