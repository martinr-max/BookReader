{"ast":null,"code":"var _jsxFileName = \"/Users/martinraba/Desktop/book_app/src/Books/userBooksList/UserBookList.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\nimport './UserBookList.css';\nimport UserBooklistItem from '../userBooklistItem/UserBooklistItem';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\nexport default function UserBookList() {\n  const [loadedBook, setLoadedBook] = useState([]);\n  const [bookIndex, setBookIndex] = useState();\n  const [open, setOpen] = useState(false);\n  const [isLoading, setIsloading] = useState(false);\n  const userId = useParams().userId;\n\n  const handleclickOpen = index => {\n    let bookId = index;\n    setBookIndex(bookId);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    const getUseBooks = async () => {\n      setIsloading(true);\n      await axios.get('http://localhost:8000/api/bookBlog/booklist/' + userId).then(books => {\n        let userBooks = books.data.books;\n        setLoadedBook(userBooks);\n        setIsloading(false);\n      }).catch(err => console.log(err));\n    };\n\n    getUseBooks();\n  }, [userId]);\n\n  const handleDeleteUserBook = id => {\n    id = bookIndex;\n    setOpen(false);\n    fetch('http://localhost:8000/api/bookBlog/booklist/delete/' + userId, {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        id: id\n      })\n    }).then(response => {\n      return response.json();\n    }).then(deletedBook => {\n      let deletedBookId = deletedBook.id;\n      var userData = JSON.parse(localStorage.getItem('userData'));\n      let newBookList = userData.userBookList;\n      console.log(newBookList);\n      newBookList.filter(book => book.id !== deletedBookId);\n      localStorage.setItem('userData', JSON.stringify(userData));\n      let newArray = loadedBook.filter(book => book.id !== deletedBookId);\n      setLoadedBook(newArray);\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, isLoading && /*#__PURE__*/React.createElement(CircularIndeterminate, {\n    color: \"primary\",\n    size: \"7rem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Your Booklist\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"userBookList\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, loadedBook.length !== 0 ? loadedBook && loadedBook.map(book => {\n    return /*#__PURE__*/React.createElement(UserBooklistItem, {\n      key: book.id,\n      id: book.id,\n      title: book.title,\n      author: book.author,\n      imageUrl: book.imageUrl,\n      open: open,\n      handleclickOpen: handleclickOpen,\n      handleClose: handleClose,\n      bookIndex: bookIndex,\n      handleDeleteUserBook: handleDeleteUserBook,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 24\n      }\n    });\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"listIsEmpty\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 12\n    }\n  }, \" Your list is empty. Maybe add some book?\"))));\n}","map":{"version":3,"sources":["/Users/martinraba/Desktop/book_app/src/Books/userBooksList/UserBookList.js"],"names":["React","useState","useEffect","axios","Container","useParams","UserBooklistItem","CircularIndeterminate","UserBookList","loadedBook","setLoadedBook","bookIndex","setBookIndex","open","setOpen","isLoading","setIsloading","userId","handleclickOpen","index","bookId","handleClose","getUseBooks","get","then","books","userBooks","data","catch","err","console","log","handleDeleteUserBook","id","fetch","method","headers","body","JSON","stringify","response","json","deletedBook","deletedBookId","userData","parse","localStorage","getItem","newBookList","userBookList","filter","book","setItem","newArray","length","map","title","author","imageUrl"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,OAAO,oBAAP;AACA,OAAOC,gBAAP,MAA6B,sCAA7B;AACA,OAAOC,qBAAP,MAAkC,4CAAlC;AAEA,eAAe,SAASC,YAAT,GAAwB;AAEnC,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACU,SAAD,EAAYC,YAAZ,IAA4BX,QAAQ,EAA1C;AACA,QAAM,CAACY,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAMgB,MAAM,GAAGZ,SAAS,GAAGY,MAA3B;;AAGA,QAAMC,eAAe,GAAIC,KAAD,IAAW;AAC/B,QAAIC,MAAM,GAAGD,KAAb;AACCP,IAAAA,YAAY,CAACQ,MAAD,CAAZ;AACAN,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD,GAJJ;;AAMG,QAAMO,WAAW,GAAG,MAAM;AACxBP,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIHZ,EAAAA,SAAS,CAAE,MAAM;AAEb,UAAMoB,WAAW,GAAG,YAAY;AACxBN,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACC,YAAMb,KAAK,CAACoB,GAAN,CAAU,iDAAiDN,MAA3D,EACNO,IADM,CACAC,KAAK,IAAG;AACX,YAAIC,SAAS,GAAGD,KAAK,CAACE,IAAN,CAAWF,KAA3B;AACAf,QAAAA,aAAa,CAACgB,SAAD,CAAb;AACAV,QAAAA,YAAY,CAAC,KAAD,CAAZ;AAEH,OANM,EAONY,KAPM,CAOAC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAPP,CAAN;AASR,KAXD;;AAYAP,IAAAA,WAAW;AAEd,GAhBQ,EAgBN,CAACL,MAAD,CAhBM,CAAT;;AAoBA,QAAMe,oBAAoB,GAAIC,EAAD,IAAO;AAChCA,IAAAA,EAAE,GAAGtB,SAAL;AACAG,IAAAA,OAAO,CAAC,KAAD,CAAP;AACCoB,IAAAA,KAAK,CAAC,wDAAwDjB,MAAzD,EACL;AACIkB,MAAAA,MAAM,EAAE,QADZ;AAEGC,MAAAA,OAAO,EAAC;AAAC,wBAAgB;AAAjB,OAFX;AAGGC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACN,QAAAA,EAAE,EAAEA;AAAL,OAAf;AAHT,KADK,CAAL,CAMAT,IANA,CAMMgB,QAAQ,IAAI;AAChB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AAEF,KATA,EAUAjB,IAVA,CAUMkB,WAAD,IAAiB;AACnB,UAAIC,aAAa,GAAGD,WAAW,CAACT,EAAhC;AACA,UAAIW,QAAQ,GAAGN,IAAI,CAACO,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAf;AACA,UAAIC,WAAW,GAAGJ,QAAQ,CAACK,YAA3B;AACAnB,MAAAA,OAAO,CAACC,GAAR,CAAYiB,WAAZ;AACAA,MAAAA,WAAW,CAACE,MAAZ,CAAmBC,IAAI,IAAIA,IAAI,CAAClB,EAAL,KAAYU,aAAvC;AACAG,MAAAA,YAAY,CAACM,OAAb,CAAqB,UAArB,EAAiCd,IAAI,CAACC,SAAL,CAAeK,QAAf,CAAjC;AAEA,UAAIS,QAAQ,GAAG5C,UAAU,CAACyC,MAAX,CAAkBC,IAAI,IAAIA,IAAI,CAAClB,EAAL,KAAYU,aAAtC,CAAf;AACAjC,MAAAA,aAAa,CAAC2C,QAAD,CAAb;AACH,KApBA,EAqBAzB,KArBA,CAqBMC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CArBb;AAsBJ,GAzBD;;AA2BA,sBACI,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCd,SAAS,iBAAI,oBAAC,qBAAD;AAAuB,IAAA,KAAK,EAAC,SAA7B;AAAuC,IAAA,IAAI,EAAC,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADd,eAEA,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADA,eAGA;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCN,UAAU,CAAC6C,MAAX,KAAsB,CAAtB,GACG7C,UAAU,IAAKA,UAAU,CAAC8C,GAAX,CAAeJ,IAAI,IAAI;AAClC,wBAAO,oBAAC,gBAAD;AACH,MAAA,GAAG,EAAIA,IAAI,CAAClB,EADT;AAEH,MAAA,EAAE,EAAIkB,IAAI,CAAClB,EAFR;AAGH,MAAA,KAAK,EAAEkB,IAAI,CAACK,KAHT;AAIH,MAAA,MAAM,EAAEL,IAAI,CAACM,MAJV;AAKH,MAAA,QAAQ,EAAGN,IAAI,CAACO,QALb;AAMH,MAAA,IAAI,EAAE7C,IANH;AAOH,MAAA,eAAe,EAAEK,eAPd;AAQH,MAAA,WAAW,EAAEG,WARV;AASH,MAAA,SAAS,EAAEV,SATR;AAUH,MAAA,oBAAoB,EAAGqB,oBAVpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAWA,GAZW,CADlB,gBAcE;AAAG,IAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAfH,CAHA,CAFA,CADJ;AA0BH","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\nimport './UserBookList.css';\nimport UserBooklistItem from '../userBooklistItem/UserBooklistItem';\nimport CircularIndeterminate from '../../shared/progressCircle/ProgressCircle';\n\nexport default function UserBookList() {\n\n    const [loadedBook, setLoadedBook] = useState([]);\n    const [bookIndex, setBookIndex] = useState();\n    const [open, setOpen] = useState(false);\n    const [isLoading, setIsloading] = useState(false);\n    const userId = useParams().userId;\n\n\n    const handleclickOpen = (index) => {\n        let bookId = index;\n         setBookIndex(bookId);\n         setOpen(true);\n       };\n   \n       const handleClose = () => {\n         setOpen(false);\n       }\n\n    useEffect( () => {\n\n        const getUseBooks = async () => {\n                setIsloading(true)\n                 await axios.get('http://localhost:8000/api/bookBlog/booklist/' + userId )\n                .then( books =>{\n                    let userBooks = books.data.books;\n                    setLoadedBook(userBooks);\n                    setIsloading(false);\n\n                })\n                .catch(err => console.log(err))\n             \n        }\n        getUseBooks();    \n            \n    }, [userId]);\n\n\n   \n    const handleDeleteUserBook = (id) =>{ \n        id = bookIndex;\n        setOpen(false)\n         fetch('http://localhost:8000/api/bookBlog/booklist/delete/' + userId,\n         {\n             method: \"DELETE\",\n            headers:{'Content-Type': 'application/json'} ,\n            body: JSON.stringify({id: id})\n         })\n        .then( response => {\n           return response.json()\n            \n        })\n        .then((deletedBook) => {\n            let deletedBookId = deletedBook.id;\n            var userData = JSON.parse(localStorage.getItem('userData'));\n            let newBookList = userData.userBookList;\n            console.log(newBookList)\n            newBookList.filter(book => book.id !== deletedBookId);\n            localStorage.setItem('userData', JSON.stringify(userData))\n\n            let newArray = loadedBook.filter(book => book.id !== deletedBookId);\n            setLoadedBook(newArray)\n        })\n        .catch(err => console.log(err))       \n    }\n    \n    return(\n        <React.Fragment>\n        {isLoading && <CircularIndeterminate color=\"primary\" size=\"7rem\" />}\n        <Container className=\"container\">\n        <h3>Your Booklist</h3>\n        \n        <ul className=\"userBookList\">\n        {loadedBook.length !== 0 ?    \n            loadedBook &&  loadedBook.map(book => {\n                return <UserBooklistItem\n                    key = {book.id}\n                    id = {book.id}\n                    title={book.title}\n                    author={book.author}\n                    imageUrl= {book.imageUrl}\n                    open={open}\n                    handleclickOpen={handleclickOpen}\n                    handleClose={handleClose}\n                    bookIndex={bookIndex}\n                    handleDeleteUserBook= {handleDeleteUserBook}\n             />})\n        :  <p className=\"listIsEmpty\"> Your list is empty. Maybe add some book?</p>}\n        </ul>\n        </Container>\n        </React.Fragment>\n    )\n}"]},"metadata":{},"sourceType":"module"}