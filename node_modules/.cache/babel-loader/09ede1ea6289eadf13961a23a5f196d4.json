{"ast":null,"code":"var _jsxFileName = \"/Users/martinraba/Desktop/book_app/src/navigation/searchEngine/SearchEngine.js\";\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport axios from 'axios';\nimport SearchResultsPage from '../searchResultsPage/SearchResultsPage';\nconst Search = React.memo(props => {\n  const [enteredFilter, setEnteredFilter] = useState('');\n  const inputRef = useRef();\n  const [loadedBooks, setLoadedBooks] = useState([]);\n  useEffect(() => {\n    axios.get('http://localhost:8000/api/bookBlog/books/').then(response => {\n      const books = response.data.books;\n      setLoadedBooks(books);\n    }).catch(err => console.log(err));\n  }, []);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (enteredFilter === inputRef.current.value) {\n        const query = enteredFilter.length === 0 ? '' : `?orderBy=\"title\"&equalTo=\"${enteredFilter}\"`;\n        fetch('http://localhost:8000/api/bookBlog/books/' + query).then(response => response.json()).then(responseData => {\n          const loadedBooks = [];\n\n          for (const key in responseData) {\n            loadedBooks.push({\n              id: key,\n              title: responseData[key].title,\n              author: responseData[key].author\n            });\n          }\n\n          setLoadedBooks(loadedBooks);\n        });\n      }\n    }, 500);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [enteredFilter, loadedBooks, inputRef]);\n  const onChangeHAndler = useMemo(event => {\n    event.preventDefault();\n    setEnteredFilter(event.target.value);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    type: \"text\",\n    value: enteredFilter,\n    onChange: onChangeHAndler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(SearchResultsPage, {\n    loadedBooks: loadedBooks,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }));\n});\nexport default Search;","map":{"version":3,"sources":["/Users/martinraba/Desktop/book_app/src/navigation/searchEngine/SearchEngine.js"],"names":["React","useState","useEffect","useRef","useMemo","axios","SearchResultsPage","Search","memo","props","enteredFilter","setEnteredFilter","inputRef","loadedBooks","setLoadedBooks","get","then","response","books","data","catch","err","console","log","timer","setTimeout","current","value","query","length","fetch","json","responseData","key","push","id","title","author","clearTimeout","onChangeHAndler","event","preventDefault","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport axios from 'axios';\nimport SearchResultsPage from '../searchResultsPage/SearchResultsPage';\n\nconst Search = React.memo(props => {\n\n  const [enteredFilter, setEnteredFilter] = useState('');\n  const inputRef = useRef();\n\n  const [loadedBooks, setLoadedBooks] = useState([]);\n\n    useEffect( () => {\n        \n           axios.get('http://localhost:8000/api/bookBlog/books/')\n           .then( response => {\n               const books = response.data.books;\n               setLoadedBooks(books)\n           })\n           .catch(err => console.log(err))       \n    }, []);\n    \n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (enteredFilter === inputRef.current.value) {\n        const query =\n          enteredFilter.length === 0\n            ? ''\n            : `?orderBy=\"title\"&equalTo=\"${enteredFilter}\"`;\n        fetch(\n          'http://localhost:8000/api/bookBlog/books/' + query\n        )\n          .then(response => response.json())\n          .then(responseData => {\n            const loadedBooks = [];\n            for (const key in responseData) {\n              loadedBooks.push({\n                id: key,\n                title: responseData[key].title,\n                author: responseData[key].author\n              });\n            }\n            setLoadedBooks(loadedBooks);\n          });\n      }\n    }, 500);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [enteredFilter, loadedBooks, inputRef]);\n\n  const onChangeHAndler = useMemo((event => {\n      event.preventDefault()\n      setEnteredFilter(event.target.value)\n\n  }), [])\n\n  return (\n      <React.Fragment>\n    <section className=\"search\">\n        <div className=\"search-input\">\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={enteredFilter}\n            onChange={onChangeHAndler}\n          />\n        </div>\n    </section>\n                <SearchResultsPage loadedBooks={loadedBooks} />\n                </React.Fragment>\n\n  );\n});\n\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}